<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mitali Acharya, Mustafa Ansari, Sai Arun">
<meta name="dcterms.date" content="2025-12-31">

<title>Understanding German Housing Market, 1964–2025 – German Housing Market Divergence (GREIX), 1964–2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
</script>
<script type="module">import "https://cdn.plot.ly/plotly-3.3.0.min"</script>



<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">German Housing Market Divergence (GREIX), 1964–2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./dsv.html" aria-current="page"> 
<span class="menu-text">Report</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data/data_desc.md"> 
<span class="menu-text">Data Description</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract"><span class="header-section-number">1</span> Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">2</span> Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">3</span> Data</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis"><span class="header-section-number">4</span> Analysis</a></li>
  <li><a href="#economic-factors" id="toc-economic-factors" class="nav-link" data-scroll-target="#economic-factors"><span class="header-section-number">5</span> Economic Factors:</a>
  <ul class="collapse">
  <li><a href="#gross-domestic-product-gdp" id="toc-gross-domestic-product-gdp" class="nav-link" data-scroll-target="#gross-domestic-product-gdp"><span class="header-section-number">5.1</span> Gross Domestic Product (GDP)</a></li>
  <li><a href="#interest-rates" id="toc-interest-rates" class="nav-link" data-scroll-target="#interest-rates"><span class="header-section-number">5.2</span> Interest Rates</a></li>
  <li><a href="#unemployment" id="toc-unemployment" class="nav-link" data-scroll-target="#unemployment"><span class="header-section-number">5.3</span> Unemployment</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example"><span class="header-section-number">5.4</span> Example</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">6</span> Conclusion</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="header-section-number">7</span> Appendix</a>
  <ul class="collapse">
  <li><a href="#national-housing-market-structure-and-dispersion" id="toc-national-housing-market-structure-and-dispersion" class="nav-link" data-scroll-target="#national-housing-market-structure-and-dispersion"><span class="header-section-number">7.1</span> National Housing Market Structure and Dispersion</a></li>
  <li><a href="#cross-city-dispersion-and-inequality" id="toc-cross-city-dispersion-and-inequality" class="nav-link" data-scroll-target="#cross-city-dispersion-and-inequality"><span class="header-section-number">7.2</span> Cross city dispersion and inequality</a></li>
  <li><a href="#do-cheaper-cities-catch-up-two-year-ahead-growth-above-vs-below-the-median" id="toc-do-cheaper-cities-catch-up-two-year-ahead-growth-above-vs-below-the-median" class="nav-link" data-scroll-target="#do-cheaper-cities-catch-up-two-year-ahead-growth-above-vs-below-the-median"><span class="header-section-number">7.3</span> Do cheaper cities catch up? Two-year ahead growth above vs below the median</a></li>
  </ul></li>
  <li><a href="#behind-the-curves" id="toc-behind-the-curves" class="nav-link" data-scroll-target="#behind-the-curves"><span class="header-section-number">8</span> Behind the Curves</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Understanding German Housing Market, 1964–2025</h1>
<p class="subtitle lead">The story behind rising housing prices</p>
</div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mitali Acharya, Mustafa Ansari, Sai Arun </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 31, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="abstract" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="abstract"><span class="header-section-number">1</span> Abstract</h2>
<p>Using housing price data from 1964 to 2025 for around 21 German cities, we analyze long-term developments in the German housing market. The data include different property types, namely apartments, single-family houses, and multi-family houses, and show varying time coverage across cities. This allows us to compare long-term trends across regions as well as more recent price developments.</p>
<p>The analysis compares housing price trends at the city level with the national housing price index (GREIX). In addition, housing price movements are related to selected macroeconomic indicators, including GDP growth, long-term interest rates, and unemployment changes. This approach helps to examine whether housing prices mainly follow general economic conditions or whether regional differences have increased over time.</p>
<p>The results show that housing prices across German cities followed a broadly similar trend until the early 2000s. From around 2010 onwards, price developments begin to differ strongly across cities. Several cities show much stronger price growth than the national average, while others experience weaker growth or stagnation. Differences across property types are also visible, with apartments and single-family houses generally showing stronger growth than multi-family houses.</p>
<p>The comparison with macroeconomic indicators suggests that housing price growth cannot be explained by economic growth alone. Strong price increases are observed during periods of low interest rates and declining unemployment, while recent price corrections indicate a higher sensitivity of housing prices to changing financial conditions. Overall, the analysis points to increasing regional and structural differences in the German housing market over time.</p>
<p>The slides can be found <a href="https://www.canva.com/design/DAG8ogHZKSo/nK6EFs-p901AJ74QD0Qg2A/edit" target="_blank">here</a></p>
</section>
<section id="introduction" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">2</span> Introduction</h2>
<p>Housing prices change over time and are influenced by economic conditions such as income, interest rates, and employment. Over long periods, even small differences in regional conditions can lead to large differences in housing prices across cities. Changes in financial conditions and household behavior can therefore have an important impact on housing markets.</p>
<ul>
<li><p>An interesting question is, <strong>how the German housing market has changed over time? Have housing prices developed similarly across cities, or have differences increased?</strong> One may think of effects in both directions: National trends such as economic growth and monetary policy affect all regions and may lead to similar housing price developments across cities. On the other hand, local factors such as population growth, housing supply, and urban demand may cause some cities to become much less affordable than others.</p></li>
<li><p>A second question concerns the role of economic conditions. <strong>Do macroeconomic factors help explain housing price changes?</strong> Again, effects in both directions are possible: Low interest rates, rising GDP, and declining unemployment can increase housing demand and push prices upward.</p></li>
</ul>
<p>At the same time, housing prices may rise even when economic growth is weak, suggesting that prices are not driven by economic factors alone.</p>
<p>This data analysis uses <a href="https://greix.de/download?inf=false&amp;tab=cities" target="_blank">housing price data</a> from 1964 to 2025 for around 21 German cities and compares city-level price trends with the national housing price index (GREIX). In addition, <a href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD?locations=DE" target="_blank">data on GDP</a>, <a href="https://data.ecb.europa.eu/data/datasets/IRS/IRS.M.DE.L.L40.CI.0000.EUR.N.Z" target="_blank">long-term interest rates</a>, and <a href="https://www.statista.com/statistics/227005/unemployment-rate-in-germany/" target="_blank">unemployment</a> are used to study the relationship between housing prices and economic conditions.</p>
</section>
<section id="data" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="data"><span class="header-section-number">3</span> Data</h2>
<p>The main data source is the German Real Estate Index (GREIX), which provides historical housing price information for different cities and property types in Germany.</p>
<p>The dataset covers the period from 1964 to 2025, depending on the city and property type. Prices are available for three types of properties: apartments, single-family houses, and multi-family houses. Not all cities have data for all property types or for the full time period. Table 1 shows the cities included in the analysis and the corresponding time coverage for each property type.</p>
<p>In addition to city-level data, the national housing price index (GREIX) is used as a benchmark to compare local housing price developments with the overall German housing market.</p>
<p>Macroeconomic data are taken from the World Bank. These include GDP, long-term interest rates, and unemployment. The macroeconomic variables are used to examine how housing price developments relate to broader economic conditions over time.</p>
<div class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>SEGMENTS <span class="op">=</span> {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Apartments"</span>: <span class="st">"Apartment"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Single-Family"</span>: <span class="st">"Single-family house"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Multi-Family"</span>: <span class="st">"Multi-family house"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> yearly_prices.copy()</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>d[<span class="st">"Year"</span>] <span class="op">=</span> pd.to_numeric(d[<span class="st">"Year"</span>], errors<span class="op">=</span><span class="st">"coerce"</span>).astype(<span class="st">"Int64"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> d.dropna(subset<span class="op">=</span>[<span class="st">"City"</span>, <span class="st">"Property_Type"</span>, <span class="st">"Year"</span>])</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>cov <span class="op">=</span> (</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    d[d[<span class="st">"Property_Type"</span>].isin(SEGMENTS.values())]</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"City"</span>, <span class="st">"Property_Type"</span>], as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    .agg(start<span class="op">=</span>(<span class="st">"Year"</span>, <span class="st">"min"</span>), end<span class="op">=</span>(<span class="st">"Year"</span>, <span class="st">"max"</span>))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>cov[<span class="st">"range"</span>] <span class="op">=</span> cov[<span class="st">"start"</span>].astype(<span class="bu">int</span>).astype(<span class="bu">str</span>) <span class="op">+</span> <span class="st">" - "</span> <span class="op">+</span> cov[<span class="st">"end"</span>].astype(<span class="bu">int</span>).astype(<span class="bu">str</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>wide <span class="op">=</span> (</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    cov.pivot(index<span class="op">=</span><span class="st">"City"</span>, columns<span class="op">=</span><span class="st">"Property_Type"</span>, values<span class="op">=</span><span class="st">"range"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{v: k <span class="cf">for</span> k, v <span class="kw">in</span> SEGMENTS.items()})</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    .reindex(columns<span class="op">=</span><span class="bu">list</span>(SEGMENTS.keys()))</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    .fillna(<span class="st">"-"</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>wide <span class="op">=</span> wide.sort_values(<span class="st">"City"</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"font.family"</span>] <span class="op">=</span> <span class="st">"serif"</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> []</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>rows.append([<span class="st">""</span>, <span class="st">""</span>, <span class="st">"Time coverage"</span>, <span class="st">""</span>])</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>rows.append([<span class="st">"City"</span>, <span class="st">"Apartments"</span>, <span class="st">"Single-Family"</span>, <span class="st">"Multi-Family"</span>])</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>rows <span class="op">+=</span> wide[[<span class="st">"City"</span>, <span class="st">"Apartments"</span>, <span class="st">"Single-Family"</span>, <span class="st">"Multi-Family"</span>]].values.tolist()</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="fl">7.6</span>, <span class="fl">5.1</span>), dpi<span class="op">=</span><span class="dv">240</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>ax.axis(<span class="st">"off"</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>col_widths <span class="op">=</span> [<span class="fl">0.30</span>, <span class="fl">0.233</span>, <span class="fl">0.233</span>, <span class="fl">0.233</span>]</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>tbl <span class="op">=</span> ax.table(</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    cellText<span class="op">=</span>rows,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    cellLoc<span class="op">=</span><span class="st">"center"</span>,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    colLoc<span class="op">=</span><span class="st">"center"</span>,</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    colWidths<span class="op">=</span>col_widths,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    bbox<span class="op">=</span>[<span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.96</span>, <span class="fl">0.92</span>],</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>tbl.auto_set_font_size(<span class="va">False</span>)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>tbl.set_fontsize(<span class="dv">11</span>)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>n_rows <span class="op">=</span> <span class="bu">len</span>(rows)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>n_cols <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (r, c), cell <span class="kw">in</span> tbl.get_celld().items():</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    cell.set_linewidth(<span class="fl">0.0</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    cell.set_edgecolor(<span class="st">"white"</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="kw">in</span> (<span class="dv">0</span>, <span class="dv">1</span>): cell.get_text().set_fontweight(<span class="st">"bold"</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> c <span class="kw">in</span> (<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">3</span>): cell.get_text().set_text(<span class="st">""</span>)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> c <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> r <span class="op">==</span> <span class="dv">0</span>: cell.get_text().set_ha(<span class="st">"center"</span>)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>: cell.get_text().set_ha(<span class="st">"left"</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>        cell.get_text().set_ha(<span class="st">"center"</span>)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> c <span class="kw">in</span> <span class="bu">range</span>(n_cols):</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    tbl[(<span class="dv">0</span>, c)].set_height(tbl[(<span class="dv">0</span>, c)].get_height() <span class="op">*</span> <span class="fl">0.92</span>)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    tbl[(<span class="dv">1</span>, c)].set_height(tbl[(<span class="dv">1</span>, c)].get_height() <span class="op">*</span> <span class="fl">0.97</span>)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>fig.canvas.draw()</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>cell00 <span class="op">=</span> tbl[(<span class="dv">0</span>, <span class="dv">0</span>)]</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>cell01 <span class="op">=</span> tbl[(<span class="dv">0</span>, <span class="dv">1</span>)]</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>cell03 <span class="op">=</span> tbl[(<span class="dv">0</span>, <span class="dv">3</span>)]</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>cell10 <span class="op">=</span> tbl[(<span class="dv">1</span>, <span class="dv">0</span>)]</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>cell_last0 <span class="op">=</span> tbl[(n_rows <span class="op">-</span> <span class="dv">1</span>, <span class="dv">0</span>)]</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>x_left <span class="op">=</span> cell00.get_x()</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>x_right <span class="op">=</span> cell03.get_x() <span class="op">+</span> cell03.get_width()</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>y_top <span class="op">=</span> cell00.get_y() <span class="op">+</span> cell00.get_height()</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>y_after_row0 <span class="op">=</span> cell00.get_y()</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>y_after_row1 <span class="op">=</span> cell10.get_y()</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>y_bottom <span class="op">=</span> cell_last0.get_y()</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>x_tc_left <span class="op">=</span> cell01.get_x()</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>x_tc_right <span class="op">=</span> x_right</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>ax.hlines(y_after_row0, x_tc_left, x_tc_right, transform<span class="op">=</span>ax.transAxes, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="fl">0.9</span>)</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>ax.hlines(y_after_row1, x_left, x_right, transform<span class="op">=</span>ax.transAxes, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="fl">1.0</span>)</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>ax.hlines(y_top <span class="op">+</span> <span class="fl">0.008</span>, x_left, x_right, transform<span class="op">=</span>ax.transAxes, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="fl">1.1</span>)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>ax.hlines(y_top <span class="op">+</span> <span class="fl">0.003</span>, x_left, x_right, transform<span class="op">=</span>ax.transAxes, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>ax.hlines(y_bottom <span class="op">-</span> <span class="fl">0.003</span>, x_left, x_right, transform<span class="op">=</span>ax.transAxes, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>ax.hlines(y_bottom <span class="op">-</span> <span class="fl">0.008</span>, x_left, x_right, transform<span class="op">=</span>ax.transAxes, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="fl">1.1</span>)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>ax.text(</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.5</span>, y_top <span class="op">+</span> <span class="fl">0.025</span>, <span class="st">"City and data coverage"</span>,</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>    transform<span class="op">=</span>ax.transAxes, ha<span class="op">=</span><span class="st">"center"</span>, va<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">"bold"</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="tbl-coverage" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="2">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-coverage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: City and data coverage for each property type and time range. This shows which years and property segments are available for each city in the GREIX dataset (apartments, single-family and multi-family houses)
</figcaption>
<div aria-describedby="tbl-coverage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<div id="tbl-coverage-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center" width="1785" height="1180">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-coverage-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a)
</figcaption>
<div aria-describedby="tbl-coverage-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/tbl-coverage-output-1.png" id="tbl-coverage-1" class="quarto-figure quarto-figure-center anchored figure-img" data-ref-parent="tbl-coverage" width="1785" height="1180">
</div>
</figure>
</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="analysis" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="analysis"><span class="header-section-number">4</span> Analysis</h2>
<p>The basic idea of the analysis is to compare housing price developments in individual German cities with the national housing price trend. <a href="#fig-1-city-vs-national" class="quarto-xref">Figure&nbsp;1</a> shows housing price trends for selected German cities together with the national average (GREIX) over the period from 1965 to 2025.</p>
<p>By plotting city-level prices alongside the national average, it becomes possible to assess which cities follow the German-wide trend closely and which deviate from it. This comparison helps to identify cities with particularly strong or weak housing price growth over time.</p>
<p>The figure shows that housing prices across most cities broadly follow the national trend over long periods. However, clear differences across cities are visible. Munich stands out strongly, with housing prices rising far above the national average, especially after 2010. Cities such as Frankfurt, Hamburg, and Stuttgart also show price levels that are consistently above the German-wide average in recent years.</p>
<p>In contrast, cities such as Chemnitz, Dortmund, and Duisburg remain below the national average for most of the observed period. Other cities, including Cologne and Dresden, follow the national trend more closely, with periods slightly above or below the German-wide average.</p>
<div id="cell-fig-1-city-vs-national" class="cell" data-fig-height="10" data-fig-width="14" data-execution_count="3">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">"whitegrid"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">8</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> city <span class="kw">in</span> <span class="bu">sorted</span>(yearly_prices[<span class="st">"City"</span>].unique()):</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> city <span class="op">==</span> <span class="st">"GREIX"</span>:</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    df_city <span class="op">=</span> yearly_prices[yearly_prices[<span class="st">"City"</span>] <span class="op">==</span> city]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        data<span class="op">=</span>df_city,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">"Price"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        markersize<span class="op">=</span><span class="fl">3.5</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="fl">1.4</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        alpha<span class="op">=</span><span class="fl">0.9</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        errorbar<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>city,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> df_greix.empty:</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        data<span class="op">=</span>df_greix,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">"Price"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        linestyle<span class="op">=</span><span class="st">"--"</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        markersize<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">"Germany (National Average)"</span>,</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>plt.title(</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Average Housing Price Trends Across German Cities (vs National Average)</span><span class="ch">\n</span><span class="st">1965–2025"</span>,</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    fontweight<span class="op">=</span><span class="st">"bold"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Year"</span>)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Average Price (€) per m²"</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"City"</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>),fontsize<span class="op">=</span><span class="dv">14</span>, loc<span class="op">=</span><span class="st">"upper left"</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-1-city-vs-national" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-1-city-vs-national-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-1-city-vs-national-output-1.png" width="1516" height="751" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-1-city-vs-national-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Average housing price trends for each German city compared to the GREIX national average (1965–2025). Cities diverge most strongly after 2010, with Munich and several other large cities rising far above the national trend, while others remain below.
</figcaption>
</figure>
</div>
</div>
</div>
<p>To allow a closer inspection of individual city developments, housing price trends are shown separately for each city in <a href="#fig-2-city-trends-grid" class="quarto-xref">Figure&nbsp;2</a>. While the previous <a href="#fig-1-city-vs-national" class="quarto-xref">Figure&nbsp;1</a> provides an overall comparison across cities, this representation makes it easier to focus on specific cities and to examine how local price developments evolve relative to the national trend.</p>
<p>For each city, the local housing price trend is plotted together with the national housing price index. This helps to identify periods in which city-level prices closely follow the German-wide average and periods in which they diverge. The city-specific plots confirm the general pattern observed in the previous <a href="#fig-1-city-vs-national" class="quarto-xref">Figure&nbsp;1</a>. Long-term housing price movements are similar across cities, but the strength of price growth differs substantially, especially in the more recent period.</p>
<p>Overall, the city-level plots are consistent with the results from the aggregated comparison. They confirm that Munich and several other large cities experienced particularly strong housing price growth, while other cities remained closer to or below the national trend. The main contribution of this representation is that it allows a detailed inspection of individual city trajectories without changing the overall conclusions.</p>
<div id="cell-fig-2-city-trends-grid" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">"white"</span>, context<span class="op">=</span><span class="st">"talk"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>yearly_city <span class="op">=</span> (</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    yearly_prices</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"City"</span>, <span class="st">"Year"</span>], as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>]</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    .sort_values([<span class="st">"City"</span>, <span class="st">"Year"</span>])</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    .reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> <span class="bu">sorted</span>(yearly_city[<span class="st">"City"</span>].unique())</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>x_major <span class="op">=</span> [<span class="dv">1960</span>, <span class="dv">1980</span>, <span class="dv">2000</span>, <span class="dv">2020</span>]</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>x_min, x_max <span class="op">=</span> <span class="dv">1960</span>, <span class="dv">2025</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>context_color <span class="op">=</span> <span class="st">"#5b8cc0"</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>focus_color <span class="op">=</span> <span class="st">"#163a5f"</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>ncols <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>nrows <span class="op">=</span> <span class="bu">int</span>(np.ceil(<span class="bu">len</span>(cities) <span class="op">/</span> ncols))</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    nrows, ncols,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    figsize<span class="op">=</span>(<span class="dv">22</span>, <span class="bu">max</span>(<span class="dv">7</span>, nrows <span class="op">*</span> <span class="fl">3.0</span>)),</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    sharex<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    sharey<span class="op">=</span><span class="va">False</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>axes <span class="op">=</span> np.array(axes).reshape(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>context_lw <span class="op">=</span> <span class="fl">1.25</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>context_alpha <span class="op">=</span> <span class="fl">0.40</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>title_fs <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>title_fw <span class="op">=</span> <span class="st">"bold"</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>tick_fs <span class="op">=</span> <span class="dv">13</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>tick_fw <span class="op">=</span> <span class="st">"bold"</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>axis_label_fs <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>axis_label_fw <span class="op">=</span> <span class="st">"bold"</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>groups <span class="op">=</span> <span class="bu">list</span>(yearly_city.groupby(<span class="st">"City"</span>))</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, city <span class="kw">in</span> <span class="bu">enumerate</span>(cities):</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> axes[i]</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, grp <span class="kw">in</span> groups:</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        ax.plot(grp[<span class="st">"Year"</span>], grp[<span class="st">"Price"</span>], color<span class="op">=</span>context_color, lw<span class="op">=</span>context_lw, alpha<span class="op">=</span>context_alpha, zorder<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> yearly_city[yearly_city[<span class="st">"City"</span>] <span class="op">==</span> city]</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    ax.plot(sub[<span class="st">"Year"</span>], sub[<span class="st">"Price"</span>], color<span class="op">=</span>focus_color, lw<span class="op">=</span><span class="fl">3.0</span>, alpha<span class="op">=</span><span class="fl">1.0</span>, zorder<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    ax.set_title(city, fontsize<span class="op">=</span>title_fs, fontweight<span class="op">=</span>title_fw, pad<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>    ax.set_xlim(x_min, x_max)</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    ax.set_xticks(x_major)</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    ax.xaxis.set_minor_locator(MultipleLocator(<span class="dv">1</span>))</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    ax.yaxis.set_major_locator(MaxNLocator(nbins<span class="op">=</span><span class="dv">3</span>))</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, which<span class="op">=</span><span class="st">"major"</span>, labelsize<span class="op">=</span>tick_fs, length<span class="op">=</span><span class="dv">8</span>, width<span class="op">=</span><span class="fl">1.2</span>, pad<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, which<span class="op">=</span><span class="st">"minor"</span>, length<span class="op">=</span><span class="dv">4</span>, width<span class="op">=</span><span class="fl">1.0</span>)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, which<span class="op">=</span><span class="st">"major"</span>, labelsize<span class="op">=</span>tick_fs, length<span class="op">=</span><span class="dv">7</span>, width<span class="op">=</span><span class="fl">1.1</span>)</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> lab <span class="kw">in</span> ax.get_xticklabels() <span class="op">+</span> ax.get_yticklabels():</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>        lab.set_fontweight(tick_fw)</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> side <span class="kw">in</span> [<span class="st">"top"</span>, <span class="st">"right"</span>, <span class="st">"bottom"</span>, <span class="st">"left"</span>]:</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>        ax.spines[side].set_visible(<span class="va">True</span>)</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>        ax.spines[side].set_linewidth(<span class="fl">1.2</span>)</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>        ax.spines[side].set_color(<span class="st">"black"</span>)</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    ax.grid(<span class="va">False</span>)</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i <span class="op">+</span> <span class="dv">1</span>, <span class="bu">len</span>(axes)):</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    axes[j].axis(<span class="st">"off"</span>)</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">"Average Housing Price Trends by City (1965–2025)"</span>, fontsize<span class="op">=</span><span class="dv">30</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, y<span class="op">=</span><span class="fl">1.02</span>)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>fig.supxlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span>axis_label_fs, fontweight<span class="op">=</span>axis_label_fw, y<span class="op">=</span><span class="fl">0.02</span>)</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>fig.supylabel(<span class="st">"Average Price (€)/m²"</span>, fontsize<span class="op">=</span>axis_label_fs, fontweight<span class="op">=</span>axis_label_fw, x<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-2-city-trends-grid" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2-city-trends-grid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-2-city-trends-grid-output-1.png" width="2084" height="1747" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-city-trends-grid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Average housing price trends for each German city, 1965–2025. Each panel highlights one city’s trajectory, showing how some cities track the national trend closely while others diverge substantially in recent years.
</figcaption>
</figure>
</div>
</div>
</div>
<p>After examining housing price levels and long term trends across cities, the next step is to look more closely at how fast housing prices have grown in different periods. While the previous figures show that some cities have higher price levels than others, they do not directly show whether these differences developed gradually or emerged more strongly in specific time periods.</p>
<p>To address this, <a href="#fig-3-top-bottom" class="quarto-xref">Figure&nbsp;3</a> compares housing price growth across cities relative to the national housing price index (GREIX). The figure focuses on two separate periods, 2004–2014 and 2014–2024, and shows the top three and bottom three cities in terms of price growth in each period. This allows for a clearer comparison of relative growth dynamics over time.</p>
<p>For the period from 2004 to 2014, Munich shows by far the strongest housing price growth, clearly exceeding the national average. Frankfurt and Hamburg also grow faster than the German wide trend during this period. In contrast, Kreis Mettmann shows only weak growth, and Duisburg and Chemnitz move in the opposite direction, with prices declining over the decade. These results are consistent with the earlier city-level plots, where Munich and other large cities already appeared to diverge upward from the national trend.</p>
<p>In the later period from 2014 to 2024, housing price growth increases substantially across most cities. However, the set of cities with the strongest growth changes. Potsdam shows the highest increase in this period, followed by Luebeck and Erfurt, all of which grow more strongly than the national average. At the same time, cities such as Bonn, Wiesbaden, and Karlsruhe exhibit weaker growth relative to GREIX. This indicates that strong housing price growth is not limited to the same cities across time and that regional dynamics can shift.</p>
<p>Overall, the growth comparison reinforces the earlier observation that housing price developments differ substantially across cities, especially in the more recent period. It also shows that these differences are not only visible in price levels but also in growth rates, and that the cities with the strongest growth change over time. While Munich dominates in the earlier period, other cities show stronger relative growth after 2014. This indicates that regional housing market dynamics evolve over time and are not driven by a single group of cities.</p>
<p>The in detail segement based analysis can be found in Appendix <a href="#fig-facets" class="quarto-xref">Figure&nbsp;15</a></p>
<div id="cell-fig-3-top-bottom" class="cell" data-fig-height="6" data-fig-width="10" data-execution_count="5">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>city_year <span class="op">=</span> (</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    yearly_prices</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"City"</span>, <span class="st">"Year"</span>], as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    .dropna(subset<span class="op">=</span>[<span class="st">"City"</span>, <span class="st">"Year"</span>, <span class="st">"Price"</span>])</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>city_year[<span class="st">"Year"</span>] <span class="op">=</span> pd.to_numeric(city_year[<span class="st">"Year"</span>], errors<span class="op">=</span><span class="st">"coerce"</span>).astype(<span class="bu">int</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>wide <span class="op">=</span> (</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    city_year[city_year[<span class="st">"Year"</span>].isin([<span class="dv">2004</span>, <span class="dv">2014</span>, <span class="dv">2024</span>])]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    .pivot(index<span class="op">=</span><span class="st">"City"</span>, columns<span class="op">=</span><span class="st">"Year"</span>, values<span class="op">=</span><span class="st">"Price"</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>pct_table <span class="op">=</span> pd.DataFrame(index<span class="op">=</span>wide.index)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>pct_table[<span class="st">"Pct_2004_2014"</span>] <span class="op">=</span> (wide[<span class="dv">2014</span>] <span class="op">/</span> wide[<span class="dv">2004</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>pct_table[<span class="st">"Pct_2014_2024"</span>] <span class="op">=</span> (wide[<span class="dv">2024</span>] <span class="op">/</span> wide[<span class="dv">2014</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>pct_table <span class="op">=</span> pct_table.dropna()</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_top_bottom(df, col):</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    g <span class="op">=</span> df.loc[<span class="st">"GREIX"</span>, col]</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> df.drop(<span class="st">"GREIX"</span>)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    top3 <span class="op">=</span> d[d[col] <span class="op">&gt;</span> g].sort_values(col, ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">3</span>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    bottom3 <span class="op">=</span> d[d[col] <span class="op">&lt;</span> g].sort_values(col, ascending<span class="op">=</span><span class="va">False</span>).tail(<span class="dv">3</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> pd.concat([top3, df.loc[[<span class="st">"GREIX"</span>]], bottom3])</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out.index.tolist(), out[col].tolist()</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>cities_0414, values_0414 <span class="op">=</span> get_top_bottom(pct_table, <span class="st">"Pct_2004_2014"</span>)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>cities_1424, values_1424 <span class="op">=</span> get_top_bottom(pct_table, <span class="st">"Pct_2014_2024"</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>red <span class="op">=</span> <span class="st">"#d62728"</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>grey <span class="op">=</span> <span class="st">"#4b4b4b"</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_panel(ax, cities, values, title):</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> np.arange(<span class="bu">len</span>(cities))</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    colors <span class="op">=</span> [red <span class="cf">if</span> c <span class="op">==</span> <span class="st">"GREIX"</span> <span class="cf">else</span> <span class="st">"#9e9e9e"</span> <span class="cf">for</span> c <span class="kw">in</span> cities]</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    ax.barh(y, values, color<span class="op">=</span>colors, height<span class="op">=</span><span class="fl">0.45</span>)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, v <span class="kw">in</span> <span class="bu">enumerate</span>(values):</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>        ax.text(v <span class="op">+</span> <span class="dv">1</span>, i, <span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.0f}</span><span class="ss">%"</span>, va<span class="op">=</span><span class="st">"center"</span>, fontsize<span class="op">=</span><span class="dv">8</span>, color<span class="op">=</span>grey)</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    ax.set_yticks(y)</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    ax.set_yticklabels(cities, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    ax.invert_yaxis()</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    ax.set_title(title, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>)</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Change (%)"</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, labelsize<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    ax.grid(axis<span class="op">=</span><span class="st">"x"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> s <span class="kw">in</span> ax.spines.values():</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>        s.set_visible(<span class="va">False</span>)</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="fl">3.6</span>), dpi<span class="op">=</span><span class="dv">180</span>)</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>plot_panel(axes[<span class="dv">0</span>], cities_0414, values_0414, <span class="st">"2004–2014"</span>)</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>plot_panel(axes[<span class="dv">1</span>], cities_1424, values_1424, <span class="st">"2014–2024"</span>)</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>fig.suptitle(</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Housing Price Growth by City: Top and Bottom Performers Relative to GREIX"</span>,</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">12</span>,</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    fontweight<span class="op">=</span><span class="st">"bold"</span>,</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">0.98</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>plt.tight_layout(rect<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.92</span>])</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-3-top-bottom" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3-top-bottom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-3-top-bottom-output-1.png" width="1380" height="622" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-top-bottom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Housing price growth by city: top and bottom three cities in each period (2004–2014 and 2014–2024). Growth rates are calculated as total percentage change over each decade.
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-greix-by-segment" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>type_colors <span class="op">=</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Apartment"</span>: <span class="st">"#0072B2"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Single-family house"</span>: <span class="st">"#009E73"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Multi-family house"</span>: <span class="st">"#D55E00"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>outline_color <span class="op">=</span> <span class="st">"white"</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>df_greix <span class="op">=</span> yearly_prices[yearly_prices[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"GREIX"</span>].copy()</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="fl">7.5</span>))</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>plt.axvspan(<span class="dv">2008</span>, <span class="dv">2010</span>, color<span class="op">=</span><span class="st">"#bbbbbb"</span>, alpha<span class="op">=</span><span class="fl">0.25</span>, lw<span class="op">=</span><span class="dv">0</span>, zorder<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>plt.axvspan(<span class="dv">2020</span>, <span class="fl">2022.5</span>, color<span class="op">=</span><span class="st">"#b0e0e6"</span>, alpha<span class="op">=</span><span class="fl">0.20</span>, lw<span class="op">=</span><span class="dv">0</span>, zorder<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>plt.text(<span class="fl">2008.7</span>, <span class="dv">500</span>, <span class="st">"Financial Crisis"</span>, rotation<span class="op">=</span><span class="dv">90</span>, va<span class="op">=</span><span class="st">"bottom"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>plt.text(<span class="fl">2020.5</span>, <span class="dv">500</span>, <span class="st">"COVID-19"</span>, rotation<span class="op">=</span><span class="dv">90</span>, va<span class="op">=</span><span class="st">"bottom"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ptype, color <span class="kw">in</span> type_colors.items():</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> segment_avg[segment_avg[<span class="st">"Property_Type"</span>] <span class="op">==</span> ptype]</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    plt.plot(d[<span class="st">"Year"</span>], d[<span class="st">"Price"</span>], color<span class="op">=</span>outline_color, linewidth<span class="op">=</span><span class="fl">7.2</span>, alpha<span class="op">=</span><span class="fl">0.35</span>, zorder<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    plt.plot(d[<span class="st">"Year"</span>], d[<span class="st">"Price"</span>], color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">3.2</span>, marker<span class="op">=</span><span class="st">'o'</span>, markersize<span class="op">=</span><span class="dv">8</span>, zorder<span class="op">=</span><span class="dv">3</span>, label<span class="op">=</span>ptype)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    plt.fill_between(d[<span class="st">"Year"</span>], d[<span class="st">"Price"</span>], color<span class="op">=</span>color, alpha<span class="op">=</span><span class="fl">0.12</span>, zorder<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    right_year <span class="op">=</span> d[<span class="st">"Year"</span>].<span class="bu">max</span>()</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    right_val <span class="op">=</span> d[d[<span class="st">"Year"</span>] <span class="op">==</span> right_year][<span class="st">"Price"</span>].values[<span class="dv">0</span>]</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    plt.annotate(</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(right_val)<span class="sc">:,}</span><span class="ss"> EUR"</span>,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        xy<span class="op">=</span>(right_year, right_val),</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        xytext<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">0</span>),</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        textcoords<span class="op">=</span><span class="st">"offset points"</span>,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        va<span class="op">=</span><span class="st">"center"</span>, ha<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>        fontsize<span class="op">=</span><span class="dv">15</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, color<span class="op">=</span>color,</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>        bbox<span class="op">=</span><span class="bu">dict</span>(facecolor<span class="op">=</span><span class="st">"white"</span>, edgecolor<span class="op">=</span>color, boxstyle<span class="op">=</span><span class="st">"round,pad=0.23"</span>, lw<span class="op">=</span><span class="dv">1</span>, alpha<span class="op">=</span><span class="fl">0.92</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Average Housing Price per m² by Property Type in Germany (1965–2025)"</span>, fontsize<span class="op">=</span><span class="dv">21</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, pad<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Average Price (EUR) per m²"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">1965</span>, <span class="dv">2026</span>, <span class="dv">5</span>), rotation<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">"y"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, alpha<span class="op">=</span><span class="fl">0.33</span>)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"Property Type"</span>, fontsize<span class="op">=</span><span class="dv">13</span>, title_fontsize<span class="op">=</span><span class="dv">15</span>, loc<span class="op">=</span><span class="st">"upper left"</span>)</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-greix-by-segment" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-greix-by-segment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-greix-by-segment-output-1.png" width="1305" height="686" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-greix-by-segment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Average housing price per m² by property type in Germany (1965–2025, GREIX composite). Apartments, single-family, and multi-family houses have diverged especially after 2010. Key periods such as the financial crisis and COVID-19 are shaded.
</figcaption>
</figure>
</div>
</div>
</div>
<p>To assess whether the national benchmark behaves differently across segments, the GREIX series is examined by property type. When the national trend is split into apartments, single-family houses, and multi-family houses (with apartments defined as all residential properties that are neither single-family nor multi-family houses), a largely shared cycle becomes visible in <a href="#fig-greix-by-segment" class="quarto-xref">Figure&nbsp;4</a>.</p>
<p>Across all three segments, price movements remain relatively moderate until the early 2000s. A clear acceleration then emerges after around 2010, followed by a cooling in the most recent years. The main turning points are therefore not confined to one segment, but appear to reflect broader market forces that affect housing demand and financing across the entire market.</p>
<p>The differences across segments are seen primarily in levels rather than timing. Apartments and single-family houses tend to reach higher price levels, especially in the later period, while multi-family house prices remain lower throughout, even though strong growth is also recorded after 2010. Overall, the national benchmark is found to move in parallel across property types, with segment-specific variation showing up more in how high prices rise than in when the cycle shifts.</p>
<div id="cell-fig-growth-by-segment" class="cell" data-fig-height="10" data-fig-width="16" data-execution_count="7">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>segments <span class="op">=</span> [<span class="st">"Apartment"</span>, <span class="st">"Single-family house"</span>, <span class="st">"Multi-family house"</span>]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>start, end <span class="op">=</span> <span class="dv">2010</span>, <span class="dv">2024</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>growth_stats <span class="op">=</span> []</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> segment <span class="kw">in</span> segments:</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> yearly_prices.copy()</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> d[d[<span class="st">"Property_Type"</span>].<span class="bu">str</span>.strip() <span class="op">==</span> segment]</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> d[d[<span class="st">"Year"</span>].between(start, end)]</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    p0 <span class="op">=</span> d[d[<span class="st">"Year"</span>] <span class="op">==</span> start][[<span class="st">"City"</span>, <span class="st">"Price"</span>]].rename(columns<span class="op">=</span>{<span class="st">"Price"</span>: <span class="st">"p_start"</span>})</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> d[d[<span class="st">"Year"</span>] <span class="op">==</span> end][[<span class="st">"City"</span>, <span class="st">"Price"</span>]].rename(columns<span class="op">=</span>{<span class="st">"Price"</span>: <span class="st">"p_end"</span>})</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    df1 <span class="op">=</span> p0.merge(p1, on<span class="op">=</span><span class="st">"City"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    df1[<span class="st">"mean_growth"</span>] <span class="op">=</span> (np.log(df1[<span class="st">"p_end"</span>]) <span class="op">-</span> np.log(df1[<span class="st">"p_start"</span>])) <span class="op">/</span> (end <span class="op">-</span> start) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    df1[<span class="st">"Property_Type"</span>] <span class="op">=</span> segment</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    growth_stats.append(df1)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>all_stats <span class="op">=</span> pd.concat(growth_stats)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>city_counts <span class="op">=</span> all_stats[<span class="st">"City"</span>].value_counts()</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>common_cities <span class="op">=</span> city_counts[city_counts <span class="op">==</span> <span class="dv">3</span>].index.tolist()</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>cities_sorted <span class="op">=</span> (</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    all_stats[all_stats[<span class="st">"City"</span>].isin(common_cities)]</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"City"</span>)[<span class="st">"mean_growth"</span>].mean()</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    .sort_values()</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    .index.tolist()</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>SEGMENT_COLORS <span class="op">=</span> {</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Apartment"</span>: <span class="st">"#238b45"</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Single-family house"</span>: <span class="st">"#e6550d"</span>,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Multi-family house"</span>: <span class="st">"#c61a2b"</span>,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>GREIX_HL_COLOR <span class="op">=</span> <span class="st">"darkgray"</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>data_by_segment <span class="op">=</span> {}</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> segment <span class="kw">in</span> segments:</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    df_seg_local <span class="op">=</span> all_stats[(all_stats[<span class="st">"Property_Type"</span>] <span class="op">==</span> segment) <span class="op">&amp;</span> (all_stats[<span class="st">"City"</span>].isin(cities_sorted))]</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    df_seg_local <span class="op">=</span> df_seg_local.sort_values(<span class="st">"mean_growth"</span>, ascending<span class="op">=</span><span class="va">True</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    data_by_segment[segment] <span class="op">=</span> df_seg_local</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, segment <span class="kw">in</span> <span class="bu">enumerate</span>(segments):</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    df_seg_local <span class="op">=</span> data_by_segment[segment]</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    colors <span class="op">=</span> [GREIX_HL_COLOR <span class="cf">if</span> city <span class="op">==</span> <span class="st">"GREIX"</span> <span class="cf">else</span> SEGMENT_COLORS[segment] <span class="cf">for</span> city <span class="kw">in</span> df_seg_local[<span class="st">"City"</span>]]</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    visible <span class="op">=</span> <span class="va">True</span> <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="va">False</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>        go.Bar(</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>df_seg_local[<span class="st">"mean_growth"</span>],</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span>df_seg_local[<span class="st">"City"</span>],</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>            orientation<span class="op">=</span><span class="st">'h'</span>,</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>            marker<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span>colors),</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>            text<span class="op">=</span>[<span class="ss">f"</span><span class="sc">{</span>v<span class="sc">:.2f}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> df_seg_local[<span class="st">"mean_growth"</span>]],</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>            textposition<span class="op">=</span><span class="st">'outside'</span>,</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>            name<span class="op">=</span>segment,</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>            visible<span class="op">=</span>visible,</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>buttons <span class="op">=</span> []</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, segment <span class="kw">in</span> <span class="bu">enumerate</span>(segments):</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>    visible <span class="op">=</span> [<span class="va">False</span>]<span class="op">*</span><span class="bu">len</span>(segments)</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>    visible[i] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>    buttons.append(<span class="bu">dict</span>(</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">'update'</span>,</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>segment,</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>        args<span class="op">=</span>[{<span class="st">'visible'</span>: visible},</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>              {<span class="st">'title'</span>: <span class="ss">f'Average Yearly Growth (</span><span class="sc">{</span>segment<span class="sc">}</span><span class="ss">) 2010–2024'</span>}]</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>    updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>        active<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>        buttons<span class="op">=</span>buttons,</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">1.0</span>, xanchor<span class="op">=</span><span class="st">'left'</span>,</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">1.13</span>, yanchor<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>        direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>        showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>    )],</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="ss">f"Average Yearly Growth (</span><span class="sc">{</span>segments[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">) 2010–2024"</span>,</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Avg. % per year"</span>,</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"City"</span>,</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">750</span>,</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(l<span class="op">=</span><span class="dv">110</span>, r<span class="op">=</span><span class="dv">40</span>, t<span class="op">=</span><span class="dv">60</span>, b<span class="op">=</span><span class="dv">40</span>),</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>    plot_bgcolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>fig.update_traces(cliponaxis<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="fig-growth-by-segment" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-growth-by-segment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="4dcc71be-be3a-4136-8be7-36d935810b09" class="plotly-graph-div" style="height:750px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("4dcc71be-be3a-4136-8be7-36d935810b09")) {                    Plotly.newPlot(                        "4dcc71be-be3a-4136-8be7-36d935810b09",                        [{"marker":{"color":["#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","#238b45","darkgray"]},"name":"Apartment","orientation":"h","text":["0.69","3.21","3.33","4.02","4.28","4.29","4.44","4.54","4.87","4.91","4.99","5.02","5.20","5.56","5.72","6.10"],"textposition":"outside","visible":true,"x":{"dtype":"f8","bdata":"h+tFEcr55T9GpRxh37cJQI5viBY6ogpAFCh4DnMVEEC3hglhZxoRQA\u002fjv39qLBFAM7+HGHG\u002fEUBAc4K1zSsSQPL80nQ6exNA8wlWOgqfE0D+2mlf2vYTQAsdpGg8FRRAOKS4YYvOFEB+3Xd5WjgWQFNQKFF34BZATV0er9dhGEA="},"y":["Chemnitz","Duisburg","Dresden","Karlsruhe","Stuttgart","Dortmund","Wiesbaden","Bonn","Muenster","Frankfurt","Duesseldorf","Luebeck","Cologne","North Rhine-Westphalia","Hamburg","GREIX"],"type":"bar","cliponaxis":false},{"marker":{"color":["#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","#e6550d","darkgray"]},"name":"Single-family house","orientation":"h","text":["2.90","3.11","3.20","3.43","3.66","3.74","3.90","3.95","4.04","4.16","4.35","4.37","4.40","4.66","4.80","4.81"],"textposition":"outside","visible":false,"x":{"dtype":"f8","bdata":"kexhE2ArB0CxGjjfLuYIQE7fCS\u002f2mQlAkpJMmbd6C0AC2sMBz0gNQFKn1HJf5g1A2N4YngwsD0CC1ao+LqEPQHplIIrrKhBAdDW\u002flreiEEDgZ2j+HmsRQBlYG0IMehFAKoAtHtCcEUCavUWcZaQSQML2OXMENhNAMUwEbcs7E0A="},"y":["Chemnitz","Duisburg","Wiesbaden","Karlsruhe","Stuttgart","Dortmund","Duesseldorf","North Rhine-Westphalia","Cologne","Bonn","Muenster","Dresden","Frankfurt","Luebeck","Hamburg","GREIX"],"type":"bar","cliponaxis":false},{"marker":{"color":["#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","#c61a2b","darkgray","#c61a2b","#c61a2b","#c61a2b"]},"name":"Multi-family house","orientation":"h","text":["2.59","2.81","3.20","3.44","3.46","3.73","3.79","4.00","4.17","4.42","4.48","4.66","5.44","5.57","6.25","6.65"],"textposition":"outside","visible":false,"x":{"dtype":"f8","bdata":"xfm598m8BEB3WmjJQYIGQCxnzppulAlAgmLgK8eAC0A2C5iG6acLQIQVYnri1g1AFMFbUVVSDkB04aMoYfoPQMM8ZW1MqRBAY3gyY9SvEUAk9pNxHOoRQA7hH6K7qBJAWxZdkejBFUBmbbF2TUoWQFKVy7BtAxlAgMMl0K6dGkA="},"y":["Karlsruhe","Bonn","Duesseldorf","Duisburg","Hamburg","Frankfurt","North Rhine-Westphalia","Dortmund","Wiesbaden","Chemnitz","Cologne","Stuttgart","GREIX","Muenster","Luebeck","Dresden"],"type":"bar","cliponaxis":false}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"margin":{"l":110,"r":40,"t":60,"b":40},"updatemenus":[{"active":0,"buttons":[{"args":[{"visible":[true,false,false]},{"title":"Average Yearly Growth (Apartment) 2010\u20132024"}],"label":"Apartment","method":"update"},{"args":[{"visible":[false,true,false]},{"title":"Average Yearly Growth (Single-family house) 2010\u20132024"}],"label":"Single-family house","method":"update"},{"args":[{"visible":[false,false,true]},{"title":"Average Yearly Growth (Multi-family house) 2010\u20132024"}],"label":"Multi-family house","method":"update"}],"direction":"down","font":{"size":15},"showactive":true,"x":1.0,"xanchor":"left","y":1.13,"yanchor":"top"}],"title":{"text":"Average Yearly Growth (Apartment) 2010\u20132024"},"xaxis":{"title":{"text":"Avg. % per year"}},"yaxis":{"title":{"text":"City"}},"height":750,"plot_bgcolor":"white"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('4dcc71be-be3a-4136-8be7-36d935810b09');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-growth-by-segment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Average yearly price growth from 2010–2024 by city and segment. Each panel shows a different property type. GREIX represents the national benchmark. Growth rates are expressed as annualized log-point changes, making city and segment differences directly comparable.
</figcaption>
</figure>
</div>
</div>
<p>To move from price levels to growth speed, average yearly price growth from 2010 to 2024 is compared across cities and property types. The national benchmark (GREIX) is kept as a reference point, while the view is switched between apartments, single-family houses, and multi-family houses to see whether the same cities remain ahead once the housing segment changes <a href="#fig-growth-by-segment" class="quarto-xref">Figure&nbsp;5</a>.</p>
<p>Across the three segments, a broad post-2010 expansion is visible, but the distribution of growth across cities is not identical. In the apartment view, growth is found to be strong in many locations, with several major markets positioned close to the national benchmark, while a smaller set of cities remains clearly below it. When the focus is shifted to single-family houses, growth appears more moderate overall and the ranking becomes more compressed, suggesting that differences across cities are present but less extreme than in the apartment segment.</p>
<p>A clearer reordering is observed in the multi-family segment. Cities that perform strongly for apartments are not necessarily placed at the top once multi-family housing is considered, and several locations emerge as stronger performers in this segment than they do elsewhere. Overall, <a href="#fig-growth-by-segment" class="quarto-xref">Figure&nbsp;5</a> reinforces the idea that divergence is shaped by both where housing is located and what type of housing is being observed: the post-2010 boom is reflected across segments, but the cities leading that growth are not the same in every part of the market.</p>
</section>
<section id="economic-factors" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="economic-factors"><span class="header-section-number">5</span> Economic Factors:</h2>
<section id="gross-domestic-product-gdp" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="gross-domestic-product-gdp"><span class="header-section-number">5.1</span> Gross Domestic Product (GDP)</h3>
<p>To relate housing price developments to broader economic conditions, housing prices are compared with Gross Domestic Product (GDP) for Germany. GDP reflects overall economic activity and income levels and is therefore a natural starting point when examining macroeconomic influences on the housing market.</p>
<p><a href="#fig-gdp" class="quarto-xref">Figure&nbsp;6</a> depicts the long-term development of average housing prices together with GDP from 1965 to 2024. Both series exhibit an upward trend over time, indicating long-run economic growth alongside rising housing prices. However, the timing and strength of these developments differ. While GDP grows relatively steadily over the entire period, housing prices increase more slowly until the early 2000s and then rise sharply after around 2010. This suggests that recent housing price growth has been stronger than what would be implied by overall economic growth alone.</p>
<p>To better capture short-term dynamics, <a href="#fig-gdp-housing" class="quarto-xref">Figure&nbsp;7</a> indicates year-on-year percentage changes in housing prices and GDP. This comparison reveals clear differences in volatility between the two series. GDP growth fluctuates strongly, with frequent and sometimes large positive and negative changes. In contrast, housing price growth is much smoother and shows fewer extreme movements.</p>
<p>Several periods of negative GDP growth do not coincide with strong declines in housing prices. In many years, housing prices continue to grow even when GDP contracts, or react only mildly. This is particularly visible in the early 1990s, the late 1990s, and around the global financial crisis. These patterns indicate that short-term housing price movements are not tightly linked to short term changes in GDP.</p>
<p>At the same time, sharp housing price declines tend to occur less frequently and may appear with a delay relative to economic downturns. This suggests that housing prices adjust more gradually than overall economic output. The period after 2010 stands out, as housing prices increase strongly despite relatively moderate GDP growth, while a noticeable correction appears only in the most recent years.</p>
<p>Overall, the GDP analysis shows that while housing prices and economic growth move in the same direction in the long run, GDP alone cannot explain short-term housing price dynamics. This indicates that additional macroeconomic factors play an important role in shaping housing price developments in Germany.</p>
<div id="cell-fig-gdp" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>gdp_path <span class="op">=</span> <span class="st">"data/GDP 1960-2024.csv"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>gdp_raw <span class="op">=</span> pd.read_csv(gdp_path, skiprows<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>gdp_germany <span class="op">=</span> gdp_raw[gdp_raw[<span class="st">"Country Name"</span>] <span class="op">==</span> <span class="st">"Germany"</span>].copy()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>gdp_germany <span class="op">=</span> (</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    gdp_germany</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    .drop(columns<span class="op">=</span>[<span class="st">"Country Name"</span>, <span class="st">"Country Code"</span>, <span class="st">"Indicator Name"</span>, <span class="st">"Indicator Code"</span>])</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    .melt(var_name<span class="op">=</span><span class="st">"Year"</span>, value_name<span class="op">=</span><span class="st">"GDP (US$)"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>gdp_germany[<span class="st">"Year"</span>] <span class="op">=</span> pd.to_numeric(gdp_germany[<span class="st">"Year"</span>], errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>gdp_germany[<span class="st">"GDP (US$)"</span>] <span class="op">=</span> pd.to_numeric(gdp_germany[<span class="st">"GDP (US$)"</span>], errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>gdp_germany <span class="op">=</span> gdp_germany[(gdp_germany[<span class="st">"Year"</span>] <span class="op">&gt;=</span> <span class="dv">1964</span>) <span class="op">&amp;</span> (gdp_germany[<span class="st">"Year"</span>] <span class="op">&lt;=</span> <span class="dv">2025</span>)]</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>greix_path <span class="op">=</span> <span class="st">"data/GREIX_all_cities_data.xlsx"</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>greix <span class="op">=</span> pd.read_excel(greix_path)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>greix_nat <span class="op">=</span> greix[greix[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"GREIX"</span>].copy()</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>yearly_prices_nat <span class="op">=</span> (</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    greix_nat</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"Year"</span>, as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>]</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"Price"</span>: <span class="st">"Average_Price (€)"</span>})</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>merged_gdp <span class="op">=</span> (</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    pd.merge(yearly_prices_nat, gdp_germany, on<span class="op">=</span><span class="st">"Year"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"Year"</span>)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">13</span>, <span class="fl">6.5</span>))</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>line1, <span class="op">=</span> ax1.plot(</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    merged_gdp[<span class="st">"Year"</span>], merged_gdp[<span class="st">"Average_Price (€)"</span>],</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#1f77b4"</span>, marker<span class="op">=</span><span class="st">"o"</span>, linewidth<span class="op">=</span><span class="fl">2.6</span>, label<span class="op">=</span><span class="st">"Average Housing Price (€)"</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">"Average Housing Price (€)"</span>, color<span class="op">=</span><span class="st">"#1f77b4"</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelcolor<span class="op">=</span><span class="st">"#1f77b4"</span>)</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> ax1.twinx()</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>line2, <span class="op">=</span> ax2.plot(</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    merged_gdp[<span class="st">"Year"</span>], merged_gdp[<span class="st">"GDP (US$)"</span>] <span class="op">/</span> <span class="fl">1e12</span>,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#E69F00"</span>, marker<span class="op">=</span><span class="st">"s"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">"GDP (Trillion US$)"</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">"GDP (Trillion US$)"</span>, color<span class="op">=</span><span class="st">"#E69F00"</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>ax2.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelcolor<span class="op">=</span><span class="st">"#E69F00"</span>)</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Germany: Housing Prices vs GDP (1964–2025)"</span>, fontsize<span class="op">=</span><span class="dv">17</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, pad<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> [line1, line2]</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [line.get_label() <span class="cf">for</span> line <span class="kw">in</span> lines]</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>ax1.legend(lines, labels, loc<span class="op">=</span><span class="st">"upper left"</span>, frameon<span class="op">=</span><span class="va">True</span>, facecolor<span class="op">=</span><span class="st">"white"</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>ax1.grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>sns.despine(right<span class="op">=</span><span class="va">False</span>, left<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>tick_years <span class="op">=</span> <span class="bu">range</span>(<span class="bu">int</span>(merged_gdp[<span class="st">"Year"</span>].<span class="bu">min</span>()), <span class="bu">int</span>(merged_gdp[<span class="st">"Year"</span>].<span class="bu">max</span>()) <span class="op">+</span> <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>ax1.set_xticks(tick_years)</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">38</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-gdp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gdp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-gdp-output-1.png" width="1218" height="593" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gdp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Germany: Housing prices versus GDP, 1965–2024.
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-gdp-housing" class="cell" data-fig-height="6" data-fig-width="12" data-execution_count="9">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">"whitegrid"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>gdp_df <span class="op">=</span> merged_gdp.copy()</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>gdp_df[<span class="st">"Housing_YoY_%"</span>] <span class="op">=</span> gdp_df[<span class="st">"Average_Price (€)"</span>].pct_change() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>gdp_df[<span class="st">"GDP_YoY_%"</span>] <span class="op">=</span> gdp_df[<span class="st">"GDP (US$)"</span>].pct_change() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> gdp_df.dropna(subset<span class="op">=</span>[<span class="st">"Housing_YoY_%"</span>, <span class="st">"GDP_YoY_%"</span>]).copy()</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> plot_df.sort_values(<span class="st">"Year"</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>crisis_periods <span class="op">=</span> [</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">2008</span>, <span class="dv">2010</span>),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">2020</span>, <span class="dv">2021</span>),</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> crisis_periods:</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> end <span class="op">&lt;</span> plot_df[<span class="st">"Year"</span>].<span class="bu">min</span>() <span class="kw">or</span> start <span class="op">&gt;</span> plot_df[<span class="st">"Year"</span>].<span class="bu">max</span>():</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    ax.axvspan(</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        start <span class="op">-</span> <span class="fl">0.5</span>,</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        end <span class="op">+</span> <span class="fl">0.5</span>,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"#EEEEEE"</span>,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>        alpha<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>bar_colors <span class="op">=</span> np.where(plot_df[<span class="st">"GDP_YoY_%"</span>] <span class="op">&gt;=</span> <span class="dv">0</span>, <span class="st">"#FDB863"</span>, <span class="st">"#B2182B"</span>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>ax.bar(</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Year"</span>],</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"GDP_YoY_%"</span>],</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>bar_colors,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    zorder<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>housing_line, <span class="op">=</span> ax.plot(</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Year"</span>],</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Housing_YoY_%"</span>],</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#1F78B4"</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>    markersize<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">2.3</span>,</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    zorder<span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, linestyle<span class="op">=</span><span class="st">":"</span>, zorder<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>ax.set_title(</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GDP vs Housing Prices in Germany</span><span class="ch">\n</span><span class="st">1964–2025 % Change"</span>,</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">15</span>,</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    fontweight<span class="op">=</span><span class="st">"bold"</span>,</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>    pad<span class="op">=</span><span class="dv">15</span>,</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Year-on-Year Change (%)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">1964</span>, <span class="dv">2025</span>)</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="dv">1965</span>, <span class="dv">2026</span>, <span class="dv">5</span>))</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>positive_patch <span class="op">=</span> Patch(color<span class="op">=</span><span class="st">"#FDB863"</span>, label<span class="op">=</span><span class="st">"Positive GDP change"</span>)</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>negative_patch <span class="op">=</span> Patch(color<span class="op">=</span><span class="st">"#B2182B"</span>, label<span class="op">=</span><span class="st">"Negative GDP change"</span>)</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>ax.legend(</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>    [housing_line, positive_patch, negative_patch],</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Housing YoY </span><span class="sc">% c</span><span class="st">hange"</span>, <span class="st">"Positive GDP change"</span>, <span class="st">"Negative GDP change"</span>],</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span><span class="st">"upper right"</span>,</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>    frameon<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    framealpha<span class="op">=</span><span class="fl">0.9</span>,</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>    facecolor<span class="op">=</span><span class="st">"white"</span>,</span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">"lightgrey"</span>,</span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>    borderpad<span class="op">=</span><span class="fl">0.6</span>,</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>    labelspacing<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>    handlelength<span class="op">=</span><span class="fl">2.0</span>,</span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>ax.grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>sns.despine()</span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-gdp-housing" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gdp-housing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-gdp-housing-output-1.png" width="944" height="558" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gdp-housing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Year-on-year percentage changes: Housing prices versus GDP, Germany.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interest-rates" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="interest-rates"><span class="header-section-number">5.2</span> Interest Rates</h3>
<p>In addition to GDP, interest rates are an important macroeconomic factor for the housing market, as they directly affect borrowing costs for households. Figure 7 compares year-on-year housing price growth with changes in long-term interest rates in Germany over the period from 1991 to 2025.</p>
<p>The <a href="#fig-interest" class="quarto-xref">Figure&nbsp;8</a> shows that housing price growth and interest rate changes often move in opposite directions. Periods with declining interest rates are frequently associated with positive housing price growth, while periods with increasing interest rates tend to coincide with weaker housing price growth.</p>
<p>From the mid-1990s to the mid-2000s, interest rates mostly decline or remain low, while housing prices show moderate but positive growth. After 2010, housing price growth becomes stronger, while interest rate changes are generally small or negative. This period coincides with a sustained phase of low interest rates.</p>
<p>A particularly clear pattern appears in the most recent years. Around 2022, interest rates increase sharply, which is followed by a strong decline in housing price growth. This is the most pronounced negative change in housing prices observed in the figure. In the subsequent years, as interest rate increases slow down, housing price growth begins to recover slightly, although it remains negative.</p>
<p>Overall, the <a href="#fig-interest" class="quarto-xref">Figure&nbsp;8</a> suggests a closer short term relationship between interest rate changes and housing price growth than was observed for GDP. While the relationship is not perfectly stable over time, the recent period highlights that sharp increases in interest rates are associated with strong downward adjustments in housing prices.</p>
<div id="cell-fig-interest" class="cell" data-fig-height="6" data-fig-width="12" data-execution_count="10">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ir_raw <span class="op">=</span> pd.read_csv(<span class="st">"data/Long term interest rate-Germany.csv"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ir_cols <span class="op">=</span> [c.strip() <span class="cf">for</span> c <span class="kw">in</span> ir_raw.columns]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>ir_raw.columns <span class="op">=</span> ir_cols</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>ir_col <span class="op">=</span> [c <span class="cf">for</span> c <span class="kw">in</span> ir_cols <span class="cf">if</span> <span class="st">"interest rate"</span> <span class="kw">in</span> c.lower()][<span class="dv">0</span>]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>date_col <span class="op">=</span> [c <span class="cf">for</span> c <span class="kw">in</span> ir_cols <span class="cf">if</span> <span class="st">"date"</span> <span class="kw">in</span> c.lower()]</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> date_col:</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    ir_raw[<span class="st">"DATE"</span>] <span class="op">=</span> pd.to_datetime(ir_raw[date_col[<span class="dv">0</span>]], errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    ir_raw[<span class="st">"DATE"</span>] <span class="op">=</span> pd.to_datetime(ir_raw.iloc[:, <span class="dv">0</span>], errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>ir_raw[<span class="st">"Year"</span>] <span class="op">=</span> ir_raw[<span class="st">"DATE"</span>].dt.year</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>ir_raw <span class="op">=</span> ir_raw.rename(columns<span class="op">=</span>{ir_col: <span class="st">"Interest_Rate"</span>})</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>ir_yearly <span class="op">=</span> (</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    ir_raw</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"Year"</span>, as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Interest_Rate"</span>]</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    .dropna(subset<span class="op">=</span>[<span class="st">"Year"</span>, <span class="st">"Interest_Rate"</span>])</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>greix <span class="op">=</span> pd.read_excel(<span class="st">"data/GREIX_all_cities_data.xlsx"</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>greix_nat <span class="op">=</span> greix[greix[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"GREIX"</span>].copy()</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>prices_nat <span class="op">=</span> (</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    greix_nat</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"Year"</span>, as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>]</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"Price"</span>: <span class="st">"Average_Price (€)"</span>})</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>prices_nat <span class="op">=</span> prices_nat[prices_nat[<span class="st">"Year"</span>] <span class="op">&gt;=</span> <span class="dv">1990</span>].reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>merged_ir <span class="op">=</span> pd.merge(prices_nat, ir_yearly, on<span class="op">=</span><span class="st">"Year"</span>, how<span class="op">=</span><span class="st">"inner"</span>).sort_values(<span class="st">"Year"</span>)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> merged_ir.copy()</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>plot_df[<span class="st">"Housing_YoY_%"</span>] <span class="op">=</span> plot_df[<span class="st">"Average_Price (€)"</span>].pct_change() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>plot_df[<span class="st">"IR_Change_pp"</span>] <span class="op">=</span> plot_df[<span class="st">"Interest_Rate"</span>].diff()</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> plot_df.dropna(subset<span class="op">=</span>[<span class="st">"Housing_YoY_%"</span>, <span class="st">"IR_Change_pp"</span>]).copy()</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> plot_df[(plot_df[<span class="st">"Year"</span>] <span class="op">&gt;=</span> <span class="dv">1990</span>) <span class="op">&amp;</span> (plot_df[<span class="st">"Year"</span>] <span class="op">&lt;=</span> <span class="dv">2025</span>)]</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>bar_colors <span class="op">=</span> np.where(plot_df[<span class="st">"IR_Change_pp"</span>] <span class="op">&gt;=</span> <span class="dv">0</span>, <span class="st">"#4CAF50"</span>, <span class="st">"#D62728"</span>)</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">13</span>, <span class="dv">6</span>))</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>ax1.plot(</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Year"</span>],</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Housing_YoY_%"</span>],</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#1F78B4"</span>,</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">2.5</span>,</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Housing YoY </span><span class="sc">% c</span><span class="st">hange"</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">"Housing Year-on-Year Change (%)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"#1F78B4"</span>)</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelcolor<span class="op">=</span><span class="st">"#1F78B4"</span>)</span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>ax1.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, linestyle<span class="op">=</span><span class="st">":"</span>)</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> ax1.twinx()</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>ax2.bar(</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Year"</span>],</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"IR_Change_pp"</span>],</span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>bar_colors,</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>    zorder<span class="op">=</span><span class="dv">0</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">"Interest Rate Change (percentage points)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"#555555"</span>)</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>ax2.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelcolor<span class="op">=</span><span class="st">"#555555"</span>)</span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (start, end) <span class="kw">in</span> [(<span class="dv">2008</span>, <span class="dv">2010</span>), (<span class="dv">2020</span>, <span class="dv">2021</span>)]:</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    ax1.axvspan(start, end, color<span class="op">=</span><span class="st">"#ECECEC"</span>, alpha<span class="op">=</span><span class="fl">0.6</span>, zorder<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>ax1.set_xlim(<span class="dv">1990</span>, <span class="dv">2025</span>)</span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>ax1.set_xticks(np.arange(<span class="dv">1990</span>, <span class="dv">2026</span>, <span class="dv">5</span>))</span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>plt.title(</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Long-Term Interest Rates vs Housing Prices in Germany</span><span class="ch">\n</span><span class="st">1991–2025 % Change"</span>,</span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">14</span>,</span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>    fontweight<span class="op">=</span><span class="st">"bold"</span>,</span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>    pad<span class="op">=</span><span class="dv">15</span>,</span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>legend_elements <span class="op">=</span> [</span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>    Line2D([<span class="dv">0</span>], [<span class="dv">0</span>], color<span class="op">=</span><span class="st">"#1F78B4"</span>, marker<span class="op">=</span><span class="st">"o"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, label<span class="op">=</span><span class="st">"Housing YoY </span><span class="sc">% c</span><span class="st">hange"</span>),</span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>    Patch(facecolor<span class="op">=</span><span class="st">"#4CAF50"</span>, edgecolor<span class="op">=</span><span class="st">"none"</span>, label<span class="op">=</span><span class="st">"Positive interest rate change"</span>),</span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>    Patch(facecolor<span class="op">=</span><span class="st">"#D62728"</span>, edgecolor<span class="op">=</span><span class="st">"none"</span>, label<span class="op">=</span><span class="st">"Negative interest rate change"</span>),</span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>ax1.legend(handles<span class="op">=</span>legend_elements, loc<span class="op">=</span><span class="st">"upper left"</span>, frameon<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>ax1.grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> spine <span class="kw">in</span> [<span class="st">"top"</span>, <span class="st">"right"</span>]:</span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>    ax1.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>    ax2.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-interest" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-interest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-interest-output-1.png" width="1232" height="559" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-interest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Interest rates versus housing prices: Year-on-year changes, Germany, 1991–2025.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="unemployment" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="unemployment"><span class="header-section-number">5.3</span> Unemployment</h3>
<p>Labor market conditions provide another angle on housing market dynamics, since unemployment captures changes in income security and household confidence. In <a href="#fig-unemployment" class="quarto-xref">Figure&nbsp;9</a>, year-on-year housing price growth is placed alongside changes in the unemployment rate in Germany from 2006 to 2025, allowing the two series to be compared over the same turning points.</p>
<p>A clear short term link is not consistently visible. Housing prices are seen to increase in several periods even when unemployment rises, and declines in housing price growth also occur when unemployment changes remain small. The 2010s illustrate this mixed relationship well. Between roughly 2010 and 2019, unemployment mostly declines or stays stable while housing prices grow strongly, which fits the idea of a favorable economic environment. However, the pattern is not one-to-one, as housing price growth remains strong even when unemployment movements are limited.</p>
<p>The correction after 2022 stands out most. A sharp downturn in housing price growth becomes visible, while unemployment changes remain comparatively modest during the same period. This suggests that the size of the adjustment cannot be attributed to unemployment developments alone, and that other forces most notably financing conditions—must have been more decisive in shaping the turning point.</p>
<p>Overall, unemployment appears to play a weaker and less direct role in short-run housing price movements than interest rates. While labor market conditions form part of the economic backdrop, changes in unemployment on their own do not seem to account for the main shifts observed in Germany’s housing price growth.</p>
<div id="cell-fig-unemployment" class="cell" data-fig-height="6" data-fig-width="12" data-execution_count="11">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>unemp <span class="op">=</span> pd.read_excel(<span class="st">"data/Germany annual average unemployment rate 2005-2025.xlsx"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>unemp.columns <span class="op">=</span> [<span class="st">"Year"</span>, <span class="st">"Unemployment_Rate (%)"</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>greix_national <span class="op">=</span> greix[greix[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"GREIX"</span>].copy()</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>yearly_prices_nat <span class="op">=</span> (</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    greix_national</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"Year"</span>, as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"Price"</span>: <span class="st">"Average_Price (€)"</span>})</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>yearly_prices_nat <span class="op">=</span> yearly_prices_nat[yearly_prices_nat[<span class="st">"Year"</span>].between(<span class="dv">2005</span>, <span class="dv">2025</span>)]</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>merged_unemp <span class="op">=</span> (</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    pd.merge(yearly_prices_nat, unemp, on<span class="op">=</span><span class="st">"Year"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"Year"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>un_df <span class="op">=</span> merged_unemp.copy()</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>un_df[<span class="st">"Housing_YoY_%"</span>] <span class="op">=</span> un_df[<span class="st">"Average_Price (€)"</span>].pct_change() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>un_df[<span class="st">"Unemp_Change_pp"</span>] <span class="op">=</span> un_df[<span class="st">"Unemployment_Rate (%)"</span>].diff()</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> un_df.dropna(subset<span class="op">=</span>[<span class="st">"Housing_YoY_%"</span>, <span class="st">"Unemp_Change_pp"</span>]).copy()</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> plot_df[(plot_df[<span class="st">"Year"</span>] <span class="op">&gt;=</span> <span class="dv">2005</span>) <span class="op">&amp;</span> (plot_df[<span class="st">"Year"</span>] <span class="op">&lt;=</span> <span class="dv">2025</span>)]</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>bar_colors <span class="op">=</span> np.where(plot_df[<span class="st">"Unemp_Change_pp"</span>] <span class="op">&gt;</span> <span class="dv">0</span>, <span class="st">"#FDB863"</span>, <span class="st">"#B2182B"</span>)</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">13</span>, <span class="dv">6</span>))</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>ax1.plot(</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Year"</span>],</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Housing_YoY_%"</span>],</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#1F78B4"</span>,</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">2.5</span>,</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">"Housing Year-on-Year Change (%)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"#1F78B4"</span>)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelcolor<span class="op">=</span><span class="st">"#1F78B4"</span>)</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>ax1.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, linestyle<span class="op">=</span><span class="st">":"</span>)</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> ax1.twinx()</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>ax2.bar(</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Year"</span>],</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>    plot_df[<span class="st">"Unemp_Change_pp"</span>],</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>bar_colors,</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">"Unemployment Rate Change (percentage points)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">"#555555"</span>)</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>ax2.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelcolor<span class="op">=</span><span class="st">"#555555"</span>)</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (start, end) <span class="kw">in</span> [(<span class="dv">2008</span>, <span class="dv">2010</span>), (<span class="dv">2020</span>, <span class="dv">2021</span>)]:</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>    ax1.axvspan(start, end, color<span class="op">=</span><span class="st">"#ECECEC"</span>, alpha<span class="op">=</span><span class="fl">0.6</span>, zorder<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>ax1.set_xlim(<span class="dv">2005</span>, <span class="dv">2025</span>)</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>ax1.set_xticks(np.arange(<span class="dv">2005</span>, <span class="dv">2026</span>, <span class="dv">5</span>))</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>plt.title(</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Unemployment vs Housing Prices in Germany</span><span class="ch">\n</span><span class="st">2006–2025 % Change"</span>,</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">14</span>,</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>    fontweight<span class="op">=</span><span class="st">"bold"</span>,</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>    pad<span class="op">=</span><span class="dv">15</span>,</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>legend_elements <span class="op">=</span> [</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>    Line2D([<span class="dv">0</span>], [<span class="dv">0</span>], color<span class="op">=</span><span class="st">"#1F78B4"</span>, marker<span class="op">=</span><span class="st">"o"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, label<span class="op">=</span><span class="st">"Housing YoY </span><span class="sc">% c</span><span class="st">hange"</span>),</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>    Patch(facecolor<span class="op">=</span><span class="st">"#FDB863"</span>, edgecolor<span class="op">=</span><span class="st">"none"</span>, label<span class="op">=</span><span class="st">"Positive unemployment change"</span>),</span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>    Patch(facecolor<span class="op">=</span><span class="st">"#B2182B"</span>, edgecolor<span class="op">=</span><span class="st">"none"</span>, label<span class="op">=</span><span class="st">"Negative unemployment change"</span>),</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>ax1.legend(handles<span class="op">=</span>legend_elements, loc<span class="op">=</span><span class="st">"upper left"</span>, frameon<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>ax1.grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> spine <span class="kw">in</span> [<span class="st">"top"</span>, <span class="st">"right"</span>]:</span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>    ax1.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a>    ax2.spines[spine].set_visible(<span class="va">False</span>)</span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-unemployment" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-unemployment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-unemployment-output-1.png" width="1232" height="559" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-unemployment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Unemployment versus housing prices: Year-on-year changes, Germany, 2006–2025.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="example" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="example"><span class="header-section-number">5.4</span> Example</h3>
<div id="fig-compare" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-compare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="image.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-compare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Comparison of housing prices and financing conditions for an 80 m² flat in 1990, 2010, and 2024.
</figcaption>
</figure>
</div>
<p>After looking at GDP, interest rates, and unemployment separately, this example illustrates how these factors come together from a household perspective.</p>
<p>The <a href="#fig-compare" class="quarto-xref">Figure&nbsp;10</a> compares the price of the same 80 m² flat at three points in time: 1990, 2010, and 2024. While interest rates declined strongly over time, housing prices increased substantially. In 1990, prices were relatively low, but interest rates were high. In 2010, interest rates dropped significantly, and housing prices increased only slightly. By 2024, interest rates remained low compared to the past, but housing prices more than doubled.</p>
<p>As a result, despite lower interest rates, the total cost of purchasing the same flat over a 30-year period is much higher in 2024 than in earlier years. This example helps to explain why housing affordability has worsened even in a low-interest environment.</p>
<p>Overall, this illustrates that lower interest rates alone do not guarantee affordable housing when housing prices rise strongly. It connects the macroeconomic patterns observed earlier with real outcomes faced by households.</p>
</section>
</section>
<section id="conclusion" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">6</span> Conclusion</h2>
<p>This analysis examined long-term housing price developments in Germany using data from 1964 to 2025 for around 21 cities and different property types. By combining city-level housing data with national indicators and macroeconomic variables, it was possible to separate general housing market trends from regional and structural differences.</p>
<p>The analysis showed that housing prices across German cities share a common long-term trend, but the strength of price growth differs substantially across regions. Large cities such as Munich, Hamburg, Frankfurt, and Cologne consistently exhibit higher price levels and stronger growth, while cities such as Chemnitz, Dortmund, and Duisburg remain below the national average. These regional differences have become more pronounced since around 2010.</p>
<p>When housing price growth was examined across different periods, it became clear that cities with strong growth change over time. While Munich dominates in earlier periods, other cities such as Potsdam and Luebeck show stronger relative growth after 2014. This indicates that regional housing market dynamics are not static and evolve over time.</p>
<p>The comparison across property types showed that apartments, single-family houses, and multi-family houses follow very similar overall trends. Differences between property types exist mainly in price levels and variability, but they do not substantially alter the ranking of cities. This suggests that regional factors are more important than property type in explaining long-term housing price growth.</p>
<p>The analysis of macroeconomic factors showed that GDP growth and housing price growth move in the same direction in the long run, but short-term housing price dynamics cannot be explained by GDP alone. Housing prices are considerably less volatile than GDP and often continue to grow during periods of weak or negative economic growth. Unemployment changes also show no strong short-term relationship with housing price growth and cannot explain major housing market turning points.</p>
<p>In contrast, interest rates display a clearer short-term relationship with housing prices. Periods of declining or low interest rates are associated with strong housing price growth, while sharp increases in interest rates coincide with strong downward adjustments in housing prices, most notably after 2022. This highlights the central role of financing conditions in shaping housing market dynamics.</p>
<p>The affordability example of a standard 80 m² flat illustrates how these factors interact in practice. While interest rates declined strongly over time, housing prices increased substantially, leading to higher total purchase costs despite lower borrowing costs. This helps explain why housing affordability has worsened even in a low-interest environment.</p>
<p>Overall, the results show that long-term housing price growth in Germany is shaped by a combination of regional factors and macroeconomic conditions. While economic growth and labor market conditions provide background context, interest rates play a key role in short-term housing price adjustments, and regional differences remain a defining feature of the German housing market.</p>
</section>
<section id="appendix" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="appendix"><span class="header-section-number">7</span> Appendix</h2>
<p>National Housing Market Structure and Dispersion</p>
<section id="national-housing-market-structure-and-dispersion" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="national-housing-market-structure-and-dispersion"><span class="header-section-number">7.1</span> National Housing Market Structure and Dispersion</h3>
<div id="cell-fig-segment-price" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>segments <span class="op">=</span> [<span class="st">"Apartment"</span>, <span class="st">"Single-family house"</span>, <span class="st">"Multi-family house"</span>]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Apartment"</span>: <span class="st">"#238b45"</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Single-family house"</span>: <span class="st">"#e6550d"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Multi-family house"</span>: <span class="st">"#c61a2b"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>traces <span class="op">=</span> []</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> seg <span class="kw">in</span> segments:</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    seg_df <span class="op">=</span> segment_avg[segment_avg[<span class="st">"Property_Type"</span>] <span class="op">==</span> seg]</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>seg_df[<span class="st">"Year"</span>], y<span class="op">=</span>seg_df[<span class="st">"Price"</span>],</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines+markers"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>seg,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span>colors[seg], width<span class="op">=</span><span class="dv">3</span>),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">7</span>),</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        visible<span class="op">=</span>(seg <span class="op">==</span> <span class="st">"Apartment"</span>)  </span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(traces)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _title(seg_text):</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">dict</span>(text<span class="op">=</span><span class="ss">f"National Price Trend: </span><span class="sc">{</span>seg_text<span class="sc">}</span><span class="ss">"</span>, x<span class="op">=</span><span class="fl">0.02</span>, xanchor<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>buttons <span class="op">=</span> []</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, seg <span class="kw">in</span> <span class="bu">enumerate</span>(segments):</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    vis <span class="op">=</span> [<span class="va">False</span>] <span class="op">*</span> <span class="bu">len</span>(segments)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    vis[i] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    buttons.append(<span class="bu">dict</span>(</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>seg,</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">"update"</span>,</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>        args<span class="op">=</span>[</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>            {<span class="st">"visible"</span>: vis},</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>            {<span class="st">"title"</span>: _title(seg)}  </span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>buttons.append(<span class="bu">dict</span>(</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"All Properties"</span>,</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>    method<span class="op">=</span><span class="st">"update"</span>,</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>    args<span class="op">=</span>[</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"visible"</span>: [<span class="va">True</span>] <span class="op">*</span> <span class="bu">len</span>(segments)},</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"title"</span>: _title(<span class="st">"All property types"</span>)} </span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>    updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>        <span class="bu">type</span><span class="op">=</span><span class="st">"dropdown"</span>,</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>        buttons<span class="op">=</span>buttons,</span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>        direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">1.01</span>,</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">1.0</span>,</span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a>        showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>),</span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>    )],</span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span>_title(<span class="st">"Apartment"</span>),</span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb11-61"><a href="#cb11-61" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Price (€/m²)"</span>,</span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a>    legend_title_text<span class="op">=</span><span class="st">"Property Type"</span>,</span>
<span id="cb11-63"><a href="#cb11-63" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">90</span>, l<span class="op">=</span><span class="dv">60</span>, r<span class="op">=</span><span class="dv">60</span>, b<span class="op">=</span><span class="dv">60</span>) </span>
<span id="cb11-64"><a href="#cb11-64" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-65"><a href="#cb11-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-66"><a href="#cb11-66" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="fig-segment-price" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-segment-price-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="a60b261a-2ec9-463c-8597-5cf1957ca6b7" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("a60b261a-2ec9-463c-8597-5cf1957ca6b7")) {                    Plotly.newPlot(                        "a60b261a-2ec9-463c-8597-5cf1957ca6b7",                        [{"line":{"color":"#238b45","width":3},"marker":{"size":7},"mode":"lines+markers","name":"Apartment","visible":true,"x":{"dtype":"i2","bdata":"rQeuB68HsAexB7IHswe0B7UHtge3B7gHuQe6B7sHvAe9B74HvwfAB8EHwgfDB8QHxQfGB8cHyAfJB8oHywfMB80HzgfPB9AH0QfSB9MH1AfVB9YH1wfYB9kH2gfbB9wH3QfeB98H4AfhB+IH4wfkB+UH5gfnB+gH6Qc="},"y":{"dtype":"f8","bdata":"AAAAAACQikAAAAAAACCMQAAAAAAAsI1AAAAAAAAgjEAAAAAAALCNQAAAAAAAaJBAAAAAAAAwkUAAAAAAAIiTQAAAAAAAwJJAAAAAAAD4kUAAAAAAAPiRQAAAAAAA+JFAAAAAAAD4kUAAAAAAAIiTQAAAAAAA4JVAAAAAAAAAmUAAAAAAANCWQAAAAAAAWJZAAAAAAABwl0AAAAAAANCWQAAAAAAAGJVAAAAAAAAYlUAAAAAAAPCUQAAAAAAAQJVAAAAAAABwl0AAAAAAAMiZQAAAAAAA+JtAAAAAAAAQnUAAAAAAAACeQAAAAAAA2J1AAAAAAADAnEAAAAAAAEicQAAAAAAAMJtAAAAAAABYm0AAAAAAAECaQAAAAAAAQJpAAAAAAACgmUAAAAAAACiZQAAAAAAAsJhAAAAAAADol0AAAAAAAMCXQAAAAAAAwJdAAAAAAAA4mEAAAAAAADiYQAAAAAAAiJhAAAAAAACgmUAAAAAAAKibQAAAAAAA2J1AAAAAAAAsoEAAAAAAAEShQAAAAAAA1KJAAAAAAADwpEAAAAAAAEinQAAAAAAAZKlAAAAAAACAq0AAAAAAAACuQAAAAAAA6rBAAAAAAABYsUAAAAAAALSuQAAAAAAAFK5AAAAAAABMrUA="},"type":"scatter"},{"line":{"color":"#e6550d","width":3},"marker":{"size":7},"mode":"lines+markers","name":"Single-family house","visible":false,"x":{"dtype":"i2","bdata":"rQeuB68HsAexB7IHswe0B7UHtge3B7gHuQe6B7sHvAe9B74HvwfAB8EHwgfDB8QHxQfGB8cHyAfJB8oHywfMB80HzgfPB9AH0QfSB9MH1AfVB9YH1wfYB9kH2gfbB9wH3QfeB98H4AfhB+IH4wfkB+UH5gfnB+gH6Qc="},"y":{"dtype":"f8","bdata":"AAAAAACQikAAAAAAAJCKQAAAAAAAkIpAAAAAAAAgjEAAAAAAALCNQAAAAAAAQI9AAAAAAABokEAAAAAAAIiTQAAAAAAAiJNAAAAAAAAwkUAAAAAAAPiRQAAAAAAA+JFAAAAAAACIk0AAAAAAAOCVQAAAAAAA4JVAAAAAAABwl0AAAAAAAPiWQAAAAAAACJZAAAAAAADQlkAAAAAAALiVQAAAAAAA8JRAAAAAAACglEAAAAAAAKCUQAAAAAAA4JVAAAAAAAD4lkAAAAAAAPCZQAAAAAAA+JtAAAAAAAB4nkAAAAAAAPCeQAAAAAAA4J9AAAAAAAC4n0AAAAAAAMieQAAAAAAAUJ5AAAAAAAAAnkAAAAAAACieQAAAAAAAAJ5AAAAAAABgnUAAAAAAAHCcQAAAAAAA0JtAAAAAAACom0AAAAAAAKibQAAAAAAA+JtAAAAAAAAIm0AAAAAAAOCaQAAAAAAACJtAAAAAAACom0AAAAAAADidQAAAAAAAeJ5AAAAAAADgn0AAAAAAAMygQAAAAAAA+KFAAAAAAACwo0AAAAAAAHylQAAAAAAASKdAAAAAAAAUqUAAAAAAAJSrQAAAAAAABK9AAAAAAAAssEAAAAAAACCsQAAAAAAAHKtAAAAAAABYq0A="},"type":"scatter"},{"line":{"color":"#c61a2b","width":3},"marker":{"size":7},"mode":"lines+markers","name":"Multi-family house","visible":false,"x":{"dtype":"i2","bdata":"rQeuB68HsAexB7IHswe0B7UHtge3B7gHuQe6B7sHvAe9B74HvwfAB8EHwgfDB8QHxQfGB8cHyAfJB8oHywfMB80HzgfPB9AH0QfSB9MH1AfVB9YH1wfYB9kH2gfbB9wH3QfeB98H4AfhB+IH4wfkB+UH5gfnB+gH6Qc="},"y":{"dtype":"f8","bdata":"AAAAAABAb0AAAAAAAEBvQAAAAAAA4HVAAAAAAAAAeUAAAAAAAOB1QAAAAAAA4HVAAAAAAADgdUAAAAAAAEB\u002fQAAAAAAAIHxAAAAAAADgdUAAAAAAAOB1QAAAAAAAAHlAAAAAAAAAeUAAAAAAAAB5QAAAAAAAAHlAAAAAAAAgfEAAAAAAAMB8QAAAAAAAYH1AAAAAAAAAfkAAAAAAAOB\u002fQAAAAAAAoH5AAAAAAABgfUAAAAAAAAB+QAAAAAAA4IBAAAAAAABQhEAAAAAAAGCIQAAAAAAAMItAAAAAAACgjkAAAAAAAOCPQAAAAAAAaJBAAAAAAACQj0AAAAAAAKCOQAAAAAAAUI5AAAAAAAAAjkAAAAAAAGCNQAAAAAAAcIxAAAAAAAAgjEAAAAAAAICLQAAAAAAAQIpAAAAAAACwiEAAAAAAAOCKQAAAAAAAUI5AAAAAAABokEAAAAAAAECPQAAAAAAAQI9AAAAAAACQkEAAAAAAANCRQAAAAAAAAJRAAAAAAAAYlUAAAAAAANCWQAAAAAAAoJlAAAAAAACgnkAAAAAAAByhQAAAAAAAJKNAAAAAAACMpEAAAAAAAMylQAAAAAAAOKhAAAAAAADop0AAAAAAAOiiQAAAAAAAvKFAAAAAAAAqokA="},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"title":{"text":"National Price Trend: Apartment","x":0.02,"xanchor":"left"},"legend":{"title":{"text":"Property Type"}},"margin":{"t":90,"l":60,"r":60,"b":60},"updatemenus":[{"buttons":[{"args":[{"visible":[true,false,false]},{"title":{"text":"National Price Trend: Apartment","x":0.02,"xanchor":"left"}}],"label":"Apartment","method":"update"},{"args":[{"visible":[false,true,false]},{"title":{"text":"National Price Trend: Single-family house","x":0.02,"xanchor":"left"}}],"label":"Single-family house","method":"update"},{"args":[{"visible":[false,false,true]},{"title":{"text":"National Price Trend: Multi-family house","x":0.02,"xanchor":"left"}}],"label":"Multi-family house","method":"update"},{"args":[{"visible":[true,true,true]},{"title":{"text":"National Price Trend: All property types","x":0.02,"xanchor":"left"}}],"label":"All Properties","method":"update"}],"direction":"down","font":{"size":15},"showactive":true,"type":"dropdown","x":1.01,"xanchor":"left","y":1.0,"yanchor":"top"}],"xaxis":{"title":{"text":"Year"}},"yaxis":{"title":{"text":"Price (\u20ac\u002fm\u00b2)"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a60b261a-2ec9-463c-8597-5cf1957ca6b7');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-segment-price-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: National average housing prices in Germany by property type, 1965–2025. Apartments and single-family houses have experienced the strongest long-run price growth, especially since 2010, while multi-family house prices have lagged behind.
</figcaption>
</figure>
</div>
</div>
</section>
<section id="cross-city-dispersion-and-inequality" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="cross-city-dispersion-and-inequality"><span class="header-section-number">7.2</span> Cross city dispersion and inequality</h3>
<div id="cell-fig-max-min" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ratio_most_least(d, segment, start_year<span class="op">=</span><span class="dv">1990</span>, end_year<span class="op">=</span><span class="dv">2024</span>):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> d[(d[<span class="st">"Property_Type"</span>] <span class="op">==</span> segment) <span class="op">&amp;</span> d[<span class="st">"Price"</span>].notna()].copy()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x[(x[<span class="st">"Year"</span>] <span class="op">&gt;=</span> start_year) <span class="op">&amp;</span> (x[<span class="st">"Year"</span>] <span class="op">&lt;=</span> end_year)]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    byy <span class="op">=</span> x.groupby(<span class="st">"Year"</span>)[<span class="st">"Price"</span>]</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> byy.<span class="bu">apply</span>(<span class="kw">lambda</span> s: s.<span class="bu">max</span>() <span class="op">/</span> s.<span class="bu">min</span>() <span class="cf">if</span> s.notna().<span class="bu">sum</span>() <span class="op">&gt;=</span> <span class="dv">2</span> <span class="cf">else</span> np.nan)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out.dropna()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>segments <span class="op">=</span> [<span class="st">"Apartment"</span>, <span class="st">"Single-family house"</span>, <span class="st">"Multi-family house"</span>]</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> {</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Apartment"</span>: <span class="st">"#238b45"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Single-family house"</span>: <span class="st">"#e6550d"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Multi-family house"</span>: <span class="st">"#c61a2b"</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>traces <span class="op">=</span> []</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> seg <span class="kw">in</span> segments:</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> ratio_most_least(df, seg, start_year<span class="op">=</span><span class="dv">1990</span>, end_year<span class="op">=</span><span class="dv">2024</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>r.index,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>r.values,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines+markers"</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>seg,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span>colors[seg], width<span class="op">=</span><span class="dv">3</span>),</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">7</span>),</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        visible<span class="op">=</span>(seg <span class="op">==</span> <span class="st">"Apartment"</span>)  </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(traces)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _title(seg_text):</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">dict</span>(text<span class="op">=</span><span class="ss">f"Ratio of Most to Least Expensive: </span><span class="sc">{</span>seg_text<span class="sc">}</span><span class="ss">"</span>, x<span class="op">=</span><span class="fl">0.02</span>, xanchor<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>buttons <span class="op">=</span> []</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, seg <span class="kw">in</span> <span class="bu">enumerate</span>(segments):</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>    vis <span class="op">=</span> [<span class="va">False</span>] <span class="op">*</span> <span class="bu">len</span>(segments)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    vis[i] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    buttons.append(<span class="bu">dict</span>(</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>seg,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">"update"</span>,</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>        args<span class="op">=</span>[</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>            {<span class="st">"visible"</span>: vis},</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>            {<span class="st">"title"</span>: _title(seg)}</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>buttons.append(<span class="bu">dict</span>(</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"All Properties"</span>,</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    method<span class="op">=</span><span class="st">"update"</span>,</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    args<span class="op">=</span>[</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"visible"</span>: [<span class="va">True</span>] <span class="op">*</span> <span class="bu">len</span>(segments)},</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>        {<span class="st">"title"</span>: _title(<span class="st">"All property types"</span>)} </span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>    updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>        <span class="bu">type</span><span class="op">=</span><span class="st">"dropdown"</span>,</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>        buttons<span class="op">=</span>buttons,</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>        direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">1.01</span>,</span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">1.0</span>,</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a>        showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>),</span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>    )],</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span>_title(<span class="st">"Apartment"</span>),</span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Max / Min price"</span>,</span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>    legend_title_text<span class="op">=</span><span class="st">"Property Type"</span>,</span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">90</span>, l<span class="op">=</span><span class="dv">60</span>, r<span class="op">=</span><span class="dv">60</span>, b<span class="op">=</span><span class="dv">60</span>) </span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="fig-max-min" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-max-min-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="2a0d9130-953d-43e4-b2f5-30a3921c1d58" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("2a0d9130-953d-43e4-b2f5-30a3921c1d58")) {                    Plotly.newPlot(                        "2a0d9130-953d-43e4-b2f5-30a3921c1d58",                        [{"line":{"color":"#238b45","width":3},"marker":{"size":7},"mode":"lines+markers","name":"Apartment","visible":true,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"5DiO4ziOC0DNzMzMzMwIQBzHcRzHcQxAVVVVVVVVDUDsxE7sxE4EQGIndmIndgJAip3YiZ3YAUDZiZ3YiZ0AQAAAAAAAAABAsRM7sRM7AUCxEzuxEzsBQBdddNFFFwVAF1100UUXBUByHMdxHMcJQDMzMzMzMwdAMzMzMzMzB0ByHMdxHMcJQAAAAAAAAA1Aq6qqqqqqCkAcx3Ecx3EMQAAAAAAAgBJAAAAAAAAAFECSJEmSJEkaQNu2bdu2bRtAt23btm3bHkBVVVVVVVUkQKuqqqqqqiZAJUmSJEmSJEAAAAAAAMAjQDmO4ziO4yJA6aKLLrroIEC66KKLLroiQM3MzMzMzCRAAAAAAAAAJEBVVVVVVVUjQA=="},"type":"scatter"},{"line":{"color":"#e6550d","width":3},"marker":{"size":7},"mode":"lines+markers","name":"Single-family house","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"MzMzMzMzB0AAAAAAAAAIQAAAAAAAAAZAFDuxEzuxA0Ce2Imd2IkFQBEREREREQFA7+7u7u7u\u002fj+3bdu2bdv+P97d3d3d3f0\u002fvLu7u7u7+z9u27Zt27b9P83MzMzMzPw\u002f2Ymd2ImdAECrqqqqqqoAQFVVVVVVVQFAXXTRRRddBEBddNFFF10EQGZmZmZmZgZAXXTRRRddBEBVVVVVVVUNQAAAAAAAAAhAx3Ecx3EcD0DNzMzMzMwMQGZmZmZmZgpAdNFFF110CUCjiy666KILQIwuuuiiiw5AVVVVVVVVD0BVVVVVVVUPQOzETuzEThBAkiRJkiRJEEBVVVVVVVURQAAAAAAAABBAAAAAAAAAEECKndiJndgRQA=="},"type":"scatter"},{"line":{"color":"#c61a2b","width":3},"marker":{"size":7},"mode":"lines+markers","name":"Multi-family house","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"q6qqqqqqCkBmZmZmZmYOQKuqqqqqqgpAVVVVVVVVDUBVVVVVVVUJQCVJkiRJkgRAHMdxHMdx\u002fD8AAAAAAAACQBzHcRzHcfw\u002fAAAAAAAABEBJkiRJkiQBQFVVVVVVVQVAq6qqqqqqBkDbtm3btm0DQKuqqqqqqgZAVVVVVVVVCUCrqqqqqqoKQDMzMzMzMwtAAAAAAAAAEEBmZmZmZmYOQAAAAAAAABxAq6qqqqqqHkAAAAAAAAAWQAAAAAAAABxAAAAAAAAAG0BVVVVVVVUjQAAAAAAAAB9AMzMzMzMzH0BVVVVVVVUZQAAAAAAAABxAVVVVVVVVHUDbtm3btm0bQJIkSZIkSR5AMzMzMzMzIUCamZmZmZkhQA=="},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"title":{"text":"Ratio of Most to Least Expensive: Apartment","x":0.02,"xanchor":"left"},"legend":{"title":{"text":"Property Type"}},"margin":{"t":90,"l":60,"r":60,"b":60},"updatemenus":[{"buttons":[{"args":[{"visible":[true,false,false]},{"title":{"text":"Ratio of Most to Least Expensive: Apartment","x":0.02,"xanchor":"left"}}],"label":"Apartment","method":"update"},{"args":[{"visible":[false,true,false]},{"title":{"text":"Ratio of Most to Least Expensive: Single-family house","x":0.02,"xanchor":"left"}}],"label":"Single-family house","method":"update"},{"args":[{"visible":[false,false,true]},{"title":{"text":"Ratio of Most to Least Expensive: Multi-family house","x":0.02,"xanchor":"left"}}],"label":"Multi-family house","method":"update"},{"args":[{"visible":[true,true,true]},{"title":{"text":"Ratio of Most to Least Expensive: All property types","x":0.02,"xanchor":"left"}}],"label":"All Properties","method":"update"}],"direction":"down","font":{"size":15},"showactive":true,"type":"dropdown","x":1.01,"xanchor":"left","y":1.0,"yanchor":"top"}],"xaxis":{"title":{"text":"Year"}},"yaxis":{"title":{"text":"Max \u002f Min price"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2a0d9130-953d-43e4-b2f5-30a3921c1d58');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-max-min-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: Ratio of the most expensive to least expensive city for each property type in Germany, 1990–2025. Lines show how price inequality between cities has widened, particularly for apartments and multi-family houses since the 2010s.
</figcaption>
</figure>
</div>
</div>
<div id="cell-fig-city-band" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> city_dispersion_bands(d, segment, start_year<span class="op">=</span><span class="dv">1990</span>, end_year<span class="op">=</span><span class="dv">2024</span>, inflation<span class="op">=</span><span class="dv">1</span>, min_cities<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> d[(d[<span class="st">"Property_Type"</span>] <span class="op">==</span> segment) <span class="op">&amp;</span> d[<span class="st">"Price"</span>].notna()].copy()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x[(x[<span class="st">"Year"</span>] <span class="op">&gt;=</span> start_year) <span class="op">&amp;</span> (x[<span class="st">"Year"</span>] <span class="op">&lt;=</span> end_year)]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"Inflation"</span> <span class="kw">in</span> x.columns:</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> x[x[<span class="st">"Inflation"</span>] <span class="op">==</span> inflation]</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"City"</span> <span class="kw">in</span> x.columns:</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> x[<span class="op">~</span>x[<span class="st">"City"</span>].isin([<span class="st">"GREIX"</span>])]</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    annual <span class="op">=</span> x.groupby([<span class="st">"Year"</span>, <span class="st">"City"</span>], as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>].mean()</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    wide <span class="op">=</span> annual.pivot(index<span class="op">=</span><span class="st">"Year"</span>, columns<span class="op">=</span><span class="st">"City"</span>, values<span class="op">=</span><span class="st">"Price"</span>).sort_index()</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    wide <span class="op">=</span> wide[wide.notna().<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>) <span class="op">&gt;=</span> min_cities]</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> wide.empty <span class="kw">or</span> wide.shape[<span class="dv">1</span>] <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pd.DataFrame()</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    qs <span class="op">=</span> wide.quantile([<span class="fl">0.10</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">0.90</span>], axis<span class="op">=</span><span class="dv">1</span>, numeric_only<span class="op">=</span><span class="va">True</span>).T</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    qs.columns <span class="op">=</span> [<span class="st">"p10"</span>, <span class="st">"p25"</span>, <span class="st">"p50"</span>, <span class="st">"p75"</span>, <span class="st">"p90"</span>]</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> qs</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>segments <span class="op">=</span> [<span class="st">"Apartment"</span>, <span class="st">"Single-family house"</span>, <span class="st">"Multi-family house"</span>]</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>default_seg <span class="op">=</span> <span class="st">"Apartment"</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>traces <span class="op">=</span> []</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>idx_map <span class="op">=</span> {}</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> seg <span class="kw">in</span> segments:</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    qs <span class="op">=</span> city_dispersion_bands(df, seg, <span class="dv">1990</span>, <span class="dv">2024</span>, inflation<span class="op">=</span><span class="dv">1</span>, min_cities<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    idx_map[seg] <span class="op">=</span> []</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> qs.empty:</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    idx_map[seg].append(<span class="bu">len</span>(traces))</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(x<span class="op">=</span>qs.index, y<span class="op">=</span>qs[<span class="st">"p90"</span>], mode<span class="op">=</span><span class="st">"lines"</span>, line<span class="op">=</span><span class="bu">dict</span>(width<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>                             showlegend<span class="op">=</span><span class="va">False</span>, visible<span class="op">=</span>(seg <span class="op">==</span> default_seg)))</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    idx_map[seg].append(<span class="bu">len</span>(traces))</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(x<span class="op">=</span>qs.index, y<span class="op">=</span>qs[<span class="st">"p10"</span>], mode<span class="op">=</span><span class="st">"lines"</span>, line<span class="op">=</span><span class="bu">dict</span>(width<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>                             fill<span class="op">=</span><span class="st">"tonexty"</span>, name<span class="op">=</span><span class="st">"p10–p90 (cities)"</span>,</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>                             visible<span class="op">=</span>(seg <span class="op">==</span> default_seg)))</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    idx_map[seg].append(<span class="bu">len</span>(traces))</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(x<span class="op">=</span>qs.index, y<span class="op">=</span>qs[<span class="st">"p75"</span>], mode<span class="op">=</span><span class="st">"lines"</span>, line<span class="op">=</span><span class="bu">dict</span>(width<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>                             showlegend<span class="op">=</span><span class="va">False</span>, visible<span class="op">=</span>(seg <span class="op">==</span> default_seg)))</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>    idx_map[seg].append(<span class="bu">len</span>(traces))</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(x<span class="op">=</span>qs.index, y<span class="op">=</span>qs[<span class="st">"p25"</span>], mode<span class="op">=</span><span class="st">"lines"</span>, line<span class="op">=</span><span class="bu">dict</span>(width<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>                             fill<span class="op">=</span><span class="st">"tonexty"</span>, name<span class="op">=</span><span class="st">"p25–p75 (cities)"</span>,</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>                             visible<span class="op">=</span>(seg <span class="op">==</span> default_seg)))</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>    idx_map[seg].append(<span class="bu">len</span>(traces))</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>    traces.append(go.Scatter(x<span class="op">=</span>qs.index, y<span class="op">=</span>qs[<span class="st">"p50"</span>], mode<span class="op">=</span><span class="st">"lines"</span>, name<span class="op">=</span><span class="st">"Median city"</span>,</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>                             line<span class="op">=</span><span class="bu">dict</span>(width<span class="op">=</span><span class="dv">3</span>), visible<span class="op">=</span>(seg <span class="op">==</span> default_seg)))</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(traces)</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _title(seg_text):</span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">dict</span>(text<span class="op">=</span><span class="ss">f"City price dispersion bands — </span><span class="sc">{</span>seg_text<span class="sc">}</span><span class="ss">"</span>, x<span class="op">=</span><span class="fl">0.02</span>, xanchor<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>buttons <span class="op">=</span> []</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> seg <span class="kw">in</span> segments:</span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>    vis <span class="op">=</span> [<span class="va">False</span>] <span class="op">*</span> <span class="bu">len</span>(traces)</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> idx_map.get(seg, []):</span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>        vis[k] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>    buttons.append(<span class="bu">dict</span>(</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>seg,</span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">"update"</span>,</span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>        args<span class="op">=</span>[</span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>            {<span class="st">"visible"</span>: vis},</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>            {<span class="st">"title"</span>: _title(seg)}  </span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a>    updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a>        <span class="bu">type</span><span class="op">=</span><span class="st">"dropdown"</span>,</span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a>        buttons<span class="op">=</span>buttons,</span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a>        direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">1.01</span>,</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true" tabindex="-1"></a>        showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>),</span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true" tabindex="-1"></a>    )],</span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span>_title(default_seg),</span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Price level (bands across cities)"</span>,</span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">90</span>, l<span class="op">=</span><span class="dv">60</span>, r<span class="op">=</span><span class="dv">60</span>, b<span class="op">=</span><span class="dv">60</span>)</span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="fig-city-band" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-city-band-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="61f34022-0ebe-4246-a4ff-3e1c277bdb1e" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("61f34022-0ebe-4246-a4ff-3e1c277bdb1e")) {                    Plotly.newPlot(                        "61f34022-0ebe-4246-a4ff-3e1c277bdb1e",                        [{"line":{"width":0},"mode":"lines","showlegend":false,"visible":true,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAACgo0AAAAAAALSkQAAAAAAAbKRAAAAAAACopEAAAAAAAGSkQP\u002f\u002f\u002f\u002f\u002f\u002fx6NA\u002f\u002f\u002f\u002f\u002f\u002f+XokAAAAAAAKihQAAAAAAAuKBAAAAAAADooEAAAAAAALCfQP\u002f\u002f\u002f\u002f\u002f\u002fn55AAAAAAACwnkAAAAAAALCeQAAAAAAAcJ1AAAAAAAAwnUAAAAAAANCeQAAAAAAAMJ9AAAAAAABwnkAAAAAAAECgQAAAAAAAnKBAAAAAAAB0okAAAAAAAPCiQAAAAAAAUKRAAAAAAADgpUAAAAAAAEinQAAAAAAAKKlAAAAAAAAIq0AAAAAAAHCsQAAAAAAAKK5AAAAAAAAIsUAAAAAAACSzQAAAAAAAWLFAAAAAAACAq0AAAAAAAEisQA=="},"type":"scatter"},{"fill":"tonexty","line":{"width":0},"mode":"lines","name":"p10\u2013p90 (cities)","visible":true,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAACIlEAAAAAAANiWQAAAAAAAuJpAAAAAAADAm0AAAAAAALiaQAAAAAAAEJtAAAAAAABgmUAAAAAAAGCYQAAAAAAAwJhAAAAAAAAgl0AAAAAAAGCWQAAAAAAAgJVAAAAAAADAlEAAAAAAAACUQAAAAAAA8JJAAAAAAAAAk0AAAAAAAICSQAAAAAAAsJFAAAAAAAAgkkAAAAAAAOCRQAAAAAAAQI9AAAAAAADwjkAAAAAAAECPQAAAAAAAaJBAAAAAAAAgkkAAAAAAAJCQQAAAAAAAcJJAAAAAAACAkUAAAAAAAGCTQAAAAAAA4JVAAAAAAABwl0AAAAAAAACZQAAAAAAAAJlAAAAAAABwl0AAAAAAABCYQA=="},"type":"scatter"},{"line":{"width":0},"mode":"lines","showlegend":false,"visible":true,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAADCoEAAAAAAACSjQAAAAAAAUqJAAAAAAACco0AAAAAAAKajQAAAAAAAcKJAAAAAAAC4oEAAAAAAAJCfQAAAAAAA8J5AAAAAAAA4nUAAAAAAAJicQAAAAAAAgJtAAAAAAACYnEAAAAAAAHCcQAAAAAAAuJpAAAAAAAAwm0AAAAAAAJCaQAAAAAAAMJtAAAAAAADImUAAAAAAAAibQAAAAAAApJpAAAAAAACom0AAAAAAABSeQAAAAAAAkJ9AAAAAAABooEAAAAAAAPihQAAAAAAAYKNAAAAAAADgpUAAAAAAAMikQAAAAAAAqKZAAAAAAADYqEAAAAAAAOisQAAAAAAA0KtAAAAAAACApkAAAAAAALilQA=="},"type":"scatter"},{"fill":"tonexty","line":{"width":0},"mode":"lines","name":"p25\u2013p75 (cities)","visible":true,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAAC0mUAAAAAAAPSaQAAAAAAAhJxAAAAAAAAGnUAAAAAAAOicQAAAAAAAIJxAAAAAAAD4m0AAAAAAAJCaQAAAAAAAyJlAAAAAAACgmUAAAAAAANiYQAAAAAAAcJdAAAAAAABIl0AAAAAAANCWQAAAAAAA4JVAAAAAAAC4lUAAAAAAALiVQAAAAAAAGJVAAAAAAAAAlEAAAAAAADiTQAAAAAAAOJNAAAAAAAAUlEAAAAAAABiVQAAAAAAAPJRAAAAAAACQlUAAAAAAANCWQAAAAAAAAJlAAAAAAAAAmUAAAAAAAICbQAAAAAAAsJ1AAAAAAADgoEAAAAAAAHCiQAAAAAAAwKJAAAAAAABgnUAAAAAAAPCeQA=="},"type":"scatter"},{"line":{"width":3},"mode":"lines","name":"Median city","visible":true,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAAAwm0AAAAAAACCcQAAAAAAAQKBAAAAAAADgn0AAAAAAAGigQAAAAAAAoJ5AAAAAAAAQnUAAAAAAAHCcQAAAAAAAIJxAAAAAAADgmkAAAAAAAOCaQAAAAAAAoJlAAAAAAACgmUAAAAAAAACZQAAAAAAAEJhAAAAAAAAgl0AAAAAAAHCXQAAAAAAAIJdAAAAAAAAwlkAAAAAAAHCXQAAAAAAA6JdAAAAAAABwl0AAAAAAAFCZQAAAAAAAaJpAAAAAAACAm0AAAAAAACCcQAAAAAAAQJ9AAAAAAAAIoUAAAAAAAKihQAAAAAAAOKNAAAAAAABApUAAAAAAAMCnQAAAAAAAmKdAAAAAAAB4pEAAAAAAAMCiQA=="},"type":"scatter"},{"line":{"width":0},"mode":"lines","showlegend":false,"visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAABgpUAAAAAAADimQAAAAAAAcKdAAAAAAABUpkAAAAAAAEinQAAAAAAAWKVAAAAAAAAIpEAAAAAAAEijQAAAAAAAiKNAAAAAAAAAo0AAAAAAABCjQAAAAAAAOKNAAAAAAADgokAAAAAAAMihQAAAAAAAuKFAAAAAAACAoUAAAAAAAMihQAAAAAAAsKFAAAAAAADcoEAAAAAAALygQAAAAAAAGKFAAAAAAADgoUAAAAAAAECiQAAAAAAA+KJAAAAAAAC4o0ABAAAAAOykQAAAAAAABKdAAQAAAABIqEAAAAAAAOipQAEAAAAAgKtAAAAAAAC4rkAAAAAAABqwQAAAAAAAVrBAAAAAAADsqkAAAAAAACSqQA=="},"type":"scatter"},{"fill":"tonexty","line":{"width":0},"mode":"lines","name":"p10\u2013p90 (cities)","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAADwmEAAAAAAAPCVQAAAAAAAwJdAAAAAAAAAmkAAAAAAAOiaQAAAAAAA8JpAAAAAAAAAm0AAAAAAAICZQAAAAAAAcJlAAAAAAAAQmkAAAAAAAHiZQAAAAAAAOJhAAAAAAABglkAAAAAAANCVQAAAAAAAAJVAAAAAAAAwlEAAAAAAAECVQAAAAAAAAJRAAAAAAAAIk0AAAAAAAOCSQAAAAAAA8JNAAAAAAADAk0AAAAAAAGCTQAAAAAAAkJNAAAAAAAD4k0AAAAAAAJCUQAAAAAAAQJdAAAAAAABImEAAAAAAAFiaQAAAAAAAuJpAAAAAAACAnUAAAAAAAKygQAAAAAAAQKFAAAAAAABYnUAAAAAAAKibQA=="},"type":"scatter"},{"line":{"width":0},"mode":"lines","showlegend":false,"visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAACwo0AAAAAAADSiQAAAAAAAyKRAAAAAAABCo0AAAAAAAIijQAAAAAAAfqNAAAAAAACsokAAAAAAAOShQAAAAAAANKJAAAAAAAAMokAAAAAAAMahQAAAAAAAJqFAAAAAAABAoEAAAAAAAGigQAAAAAAAaKBAAAAAAABAoEAAAAAAAJCgQAAAAAAAkJ9AAAAAAADInkAAAAAAAHieQAAAAAAAaJ9AAAAAAAAEoEAAAAAAAHygQAAAAAAAbKFAAAAAAAB2oUAAAAAAAHqiQAAAAAAAMqRAAAAAAACCpEAAAAAAABKmQAAAAAAAOKhAAAAAAABOq0AAAAAAABqtQAAAAAAArKxAAAAAAAAGqEAAAAAAAIqmQA=="},"type":"scatter"},{"fill":"tonexty","line":{"width":0},"mode":"lines","name":"p25\u2013p75 (cities)","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAAAgnEAAAAAAAHyaQAAAAAAAoJlAAAAAAAAIm0AAAAAAACCcQAAAAAAA+JtAAAAAAABInEAAAAAAAICbQAAAAAAAYJ1AAAAAAABwnEAAAAAAAAycQAAAAAAAaJpAAAAAAABgmEAAAAAAAACZQAAAAAAAcJdAAAAAAABwl0AAAAAAAICWQAAAAAAAkJVAAAAAAABklEAAAAAAAKCUQAAAAAAAoJRAAAAAAABolUAAAAAAAOCVQAAAAAAAgJZAAAAAAABElkAAAAAAAMCXQAAAAAAAUJlAAAAAAABYm0AAAAAAAGCdQAAAAAAAuJ9AAAAAAACeoUAAAAAAAEyjQAAAAAAAzqNAAAAAAABUoEAAAAAAAPSfQA=="},"type":"scatter"},{"line":{"width":3},"mode":"lines","name":"Median city","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAADgn0AAAAAAACSdQAAAAAAAsJ1AAAAAAADYnUAAAAAAAECfQAAAAAAAaJ9AAAAAAABAn0AAAAAAAKCeQAAAAAAA4J9AAAAAAABAoEAAAAAAAGifQAAAAAAA8J5AAAAAAACwnUAAAAAAAGCdQAAAAAAAwJxAAAAAAABwnEAAAAAAACCcQAAAAAAAgJtAAAAAAABAmkAAAAAAAPCZQAAAAAAAQJpAAAAAAACQmkAAAAAAACCcQAAAAAAAcJxAAAAAAACInUAAAAAAAPCeQAAAAAAAuKBAAAAAAABYoUAAAAAAACSjQAAAAAAAUKRAAAAAAABspkAAAAAAAEyoQAAAAAAA7KhAAAAAAADcpEAAAAAAAMSjQA=="},"type":"scatter"},{"line":{"width":0},"mode":"lines","showlegend":false,"visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAABgm0AAAAAAADCaQAAAAAAAMJtAAAAAAACAm0AAAAAAAIiaQAAAAAAAEJlAAAAAAABYmEAAAAAAAHCWQAAAAAAAcJdAAAAAAACQlkAAAAAAAPCVQAAAAAAAcJdAAAAAAACAlkAAAAAAAACVQAAAAAAAAJRA\u002f\u002f\u002f\u002f\u002f\u002f+flEAAAAAAAMiTQAAAAAAAAJRAAAAAAAAQk0AAAAAAAKCUQAAAAAAA0JVAAAAAAAB4l0AAAAAAAHiYQAAAAAAAaJtAAAAAAABImkAAAAAAAACdQAAAAAAAXKBAAAAAAABIokAAAAAAAGCjQAAAAAAALKVAAAAAAABIp0AAAAAAAMSoQAAAAAAAbKZAAAAAAAAIoUAAAAAAADChQA=="},"type":"scatter"},{"fill":"tonexty","line":{"width":0},"mode":"lines","name":"p10\u2013p90 (cities)","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAADAjkAAAAAAAMCLQAAAAAAAYI1AAAAAAACAjkAAAAAAAKCOQAAAAAAAcIxAAAAAAABAj0AAAAAAAGCNQAAAAAAAUI5AAAAAAABQiUAAAAAAAOCKQAAAAAAAwIdAAAAAAADAh0AAAAAAAGCIQAAAAAAAwIJAAAAAAADAgkAAAAAAAMCCQAAAAAAAwIJAAAAAAADAgkAAAAAAAECAQAAAAAAA4H9AAAAAAADgf0AAAAAAAICAQAAAAAAAYH9AAAAAAACgf0AAAAAAAHCBQAAAAAAAQINAAAAAAABAhkAAAAAAAICGQAAAAAAAsIhAAAAAAABwjEAAAAAAALiQQAAAAAAA8I5AAAAAAAAQiEAAAAAAAHCHQA=="},"type":"scatter"},{"line":{"width":0},"mode":"lines","showlegend":false,"visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAABQmUAAAAAAAAiWQAAAAAAAKJlAAAAAAAD4lkAAAAAAAOiXQAAAAAAADJdAAAAAAAAgl0AAAAAAAHiUQAAAAAAAGJVAAAAAAAD0lUAAAAAAAGCTQAAAAAAA8JRAAAAAAACQlUAAAAAAAACUQAAAAAAAdJNAAAAAAACYkkAAAAAAAFySQAAAAAAAiJNAAAAAAADAkkAAAAAAAOiSQAAAAAAAjJRAAAAAAAC0lEAAAAAAAICWQAAAAAAADJdAAAAAAACImEAAAAAAANCbQAAAAAAAmJxAAAAAAABeoEAAAAAAAJqgQAAAAAAA2qFAAAAAAABWo0AAAAAAAL6kQAAAAAAAoKRAAAAAAABUn0AAAAAAAMCcQA=="},"type":"scatter"},{"fill":"tonexty","line":{"width":0},"mode":"lines","name":"p25\u2013p75 (cities)","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAADgkEAAAAAAAFiRQAAAAAAAWJFAAAAAAABwkkAAAAAAANSSQAAAAAAA+JFAAAAAAAC8kUAAAAAAAPiRQAAAAAAACJFAAAAAAABYkUAAAAAAADCRQAAAAAAAgJFAAAAAAAAwkUAAAAAAAICRQAAAAAAAiIhAAAAAAACIiEAAAAAAADiIQAAAAAAAkIVAAAAAAABQhEAAAAAAAFCEQAAAAAAAwIJAAAAAAAAYhUAAAAAAABiFQAAAAAAA0IZAAAAAAABQhEAAAAAAAEiHQAAAAAAAsI1AAAAAAACAkUAAAAAAAACUQAAAAAAAaJVAAAAAAABcl0AAAAAAAJSbQAAAAAAA2JhAAAAAAACskkAAAAAAAJyTQA=="},"type":"scatter"},{"line":{"width":3},"mode":"lines","name":"Median city","visible":false,"x":{"dtype":"i2","bdata":"xgfHB8gHyQfKB8sHzAfNB84HzwfQB9EH0gfTB9QH1QfWB9cH2AfZB9oH2wfcB90H3gffB+AH4QfiB+MH5AflB+YH5wfoBw=="},"y":{"dtype":"f8","bdata":"AAAAAAAwkUAAAAAAAMCSQAAAAAAA0JFAAAAAAAAQk0AAAAAAAHiUQAAAAAAA6JJAAAAAAAA4k0AAAAAAAIiTQAAAAAAAAJRAAAAAAACwk0AAAAAAAMCSQAAAAAAAYJNAAAAAAAAgkkAAAAAAACCSQAAAAAAAgJFAAAAAAACAkUAAAAAAANCRQAAAAAAAIJJAAAAAAACQkEAAAAAAANCRQAAAAAAAMJFAAAAAAAAwkUAAAAAAAIiTQAAAAAAAKJRAAAAAAAAAlEAAAAAAAKiWQAAAAAAAwJdAAAAAAAC4mkAAAAAAAOicQAAAAAAABKBAAAAAAACUoUAAAAAAACSjQAAAAAAASKJAAAAAAAC4mkAAAAAAAJCaQA=="},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"title":{"text":"City price dispersion bands \u2014 Apartment","x":0.02,"xanchor":"left"},"margin":{"t":90,"l":60,"r":60,"b":60},"updatemenus":[{"buttons":[{"args":[{"visible":[true,true,true,true,true,false,false,false,false,false,false,false,false,false,false]},{"title":{"text":"City price dispersion bands \u2014 Apartment","x":0.02,"xanchor":"left"}}],"label":"Apartment","method":"update"},{"args":[{"visible":[false,false,false,false,false,true,true,true,true,true,false,false,false,false,false]},{"title":{"text":"City price dispersion bands \u2014 Single-family house","x":0.02,"xanchor":"left"}}],"label":"Single-family house","method":"update"},{"args":[{"visible":[false,false,false,false,false,false,false,false,false,false,true,true,true,true,true]},{"title":{"text":"City price dispersion bands \u2014 Multi-family house","x":0.02,"xanchor":"left"}}],"label":"Multi-family house","method":"update"}],"direction":"down","font":{"size":15},"showactive":true,"type":"dropdown","x":1.01,"xanchor":"left","y":0.8,"yanchor":"top"}],"xaxis":{"title":{"text":"Year"}},"yaxis":{"title":{"text":"Price level (bands across cities)"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('61f34022-0ebe-4246-a4ff-3e1c277bdb1e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-city-band-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: City price dispersion bands, 1990–2024. The median (p50) shows the “typical” city each year, while the shaded ranges (p25–p75 and p10–p90) summarize how widely city prices are spread. A widening band indicates growing divergence across local markets.
</figcaption>
</figure>
</div>
</div>
<p>Taken together, the <a href="#fig-max-min" class="quarto-xref">Figure&nbsp;12</a> and <a href="#fig-city-band" class="quarto-xref">Figure&nbsp;13</a> separate levels from dispersion. The <a href="#fig-city-band" class="quarto-xref">Figure&nbsp;13</a> chart shows how the “typical” city price evolves, while the shaded ranges reveal whether cities move together or fan out. From the 2010s onward, the distribution widens markedly, meaning the upswing was not uniform: some markets pulled away from the pack. The <a href="#fig-max-min" class="quarto-xref">Figure&nbsp;12</a> plot confirms that this divergence is not just a broad spread at the extremes, the most expensive city became many times pricier than the least expensive city, and the gap stays elevated even after the post-2022 cooling. The “All properties” view in <a href="#fig-max-min" class="quarto-xref">Figure&nbsp;12</a> shows the same pattern in aggregate, indicating that cross city divergence is a general feature of the period, not confined to a single segment.</p>
</section>
<section id="do-cheaper-cities-catch-up-two-year-ahead-growth-above-vs-below-the-median" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="do-cheaper-cities-catch-up-two-year-ahead-growth-above-vs-below-the-median"><span class="header-section-number">7.3</span> Do cheaper cities catch up? Two-year ahead growth above vs below the median</h3>
<div id="cell-fig-avg-2yr" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> above_below_median_city_growth(d, segment<span class="op">=</span><span class="st">"Apartment"</span>, start_year<span class="op">=</span><span class="dv">2000</span>, end_year<span class="op">=</span><span class="dv">2024</span>, horizon<span class="op">=</span><span class="dv">2</span>):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    nom <span class="op">=</span> d[(d[<span class="st">"Property_Type"</span>] <span class="op">==</span> segment) <span class="op">&amp;</span> d[<span class="st">"Price"</span>].notna()][[<span class="st">"City"</span>,<span class="st">"Year"</span>,<span class="st">"Price"</span>]].copy()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    real <span class="op">=</span> d[(d[<span class="st">"Property_Type"</span>] <span class="op">==</span> segment) <span class="op">&amp;</span> d[<span class="st">"Index"</span>].notna()][[<span class="st">"City"</span>,<span class="st">"Year"</span>,<span class="st">"Index"</span>]].copy()</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    end_t <span class="op">=</span> <span class="bu">min</span>(end_year <span class="op">-</span> horizon, <span class="bu">int</span>(d[<span class="st">"Year"</span>].<span class="bu">max</span>()) <span class="op">-</span> horizon)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    years <span class="op">=</span> <span class="bu">range</span>(start_year, end_t <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> []</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> y <span class="kw">in</span> years:</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        nom_y <span class="op">=</span> nom[nom[<span class="st">"Year"</span>] <span class="op">==</span> y].copy()</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> nom_y[<span class="st">"City"</span>].nunique() <span class="op">&lt;</span> <span class="dv">4</span>:</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        med <span class="op">=</span> nom_y[<span class="st">"Price"</span>].median()</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        nom_y[<span class="st">"group"</span>] <span class="op">=</span> np.where(nom_y[<span class="st">"Price"</span>] <span class="op">&gt;=</span> med, <span class="st">"Above median"</span>, <span class="st">"Below median"</span>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>        idx_t <span class="op">=</span> real[real[<span class="st">"Year"</span>] <span class="op">==</span> y].set_index(<span class="st">"City"</span>)[<span class="st">"Index"</span>]</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        idx_f <span class="op">=</span> real[real[<span class="st">"Year"</span>] <span class="op">==</span> y <span class="op">+</span> horizon].set_index(<span class="st">"City"</span>)[<span class="st">"Index"</span>]</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> (np.log(idx_f) <span class="op">-</span> np.log(idx_t)) <span class="op">*</span> <span class="dv">100</span>  <span class="co"># log points</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        tmp <span class="op">=</span> nom_y.set_index(<span class="st">"City"</span>)[[<span class="st">"group"</span>]].join(g.rename(<span class="st">"growth"</span>), how<span class="op">=</span><span class="st">"inner"</span>).dropna()</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> tmp.empty:</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>        out <span class="op">=</span> tmp.groupby(<span class="st">"group"</span>)[<span class="st">"growth"</span>].mean()</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>        rows.append({<span class="st">"Year"</span>: y, <span class="st">"Above median"</span>: out.get(<span class="st">"Above median"</span>, np.nan), <span class="st">"Below median"</span>: out.get(<span class="st">"Below median"</span>, np.nan)})</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> pd.DataFrame(rows).set_index(<span class="st">"Year"</span>).sort_index()</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>res12 <span class="op">=</span> above_below_median_city_growth(df, segment<span class="op">=</span><span class="st">"Apartment"</span>, start_year<span class="op">=</span><span class="dv">2000</span>, end_year<span class="op">=</span><span class="dv">2024</span>, horizon<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> res12.index.to_numpy()</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="bu">len</span>(years))</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> <span class="fl">0.38</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Bar(</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>years, y<span class="op">=</span>res12[<span class="st">"Below median"</span>],</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Below median"</span>, marker_color<span class="op">=</span><span class="st">"#3471C1"</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Bar(</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>years, y<span class="op">=</span>res12[<span class="st">"Above median"</span>],</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Above median"</span>, marker_color<span class="op">=</span><span class="st">"#EA8C3B"</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">"group"</span>,</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Avg Real 2-Year-Ahead Growth: Above vs Below Median Cities"</span>,</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Year"</span>,</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Avg growth over next 2 years"</span>,</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(x<span class="op">=</span><span class="fl">0.8</span>, y<span class="op">=</span><span class="fl">1.1</span>, orientation<span class="op">=</span><span class="st">"h"</span>)</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="fig-avg-2yr" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-avg-2yr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="f15ad686-f03f-48fb-9ea5-5ee9a1ae4b3d" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("f15ad686-f03f-48fb-9ea5-5ee9a1ae4b3d")) {                    Plotly.newPlot(                        "f15ad686-f03f-48fb-9ea5-5ee9a1ae4b3d",                        [{"marker":{"color":"#3471C1"},"name":"Below median","x":{"dtype":"i2","bdata":"0AfRB9IH0wfUB9UH1gfXB9gH2QfaB9sH3AfdB94H3wfgB+EH4gfjB+QH5QfmBw=="},"y":{"dtype":"f8","bdata":"clQUDESJH8C4rukhUPYcwAbrP1ITVgrANAkrEdFWwb8M5AnMoeb\u002fv0Qg\u002f08EDAPAAHon0U82CMBt1k6d0rj0vxzHkM889AZAzVZq7xLnCUCi8Tg8qZAZQBiJ3XYWlxlAcFYSXVLpGkAZs9wnCsMaQCmxRcjbvidAsJ6BxnqeKkDUV+bakv8qQFZO3rIRKzFAB9IkOJ\u002fPM0BIhUxl5tM4QIT\u002fKKG63TJApTSuY9iAEsC2p+hJPMclwA=="},"type":"bar"},{"marker":{"color":"#EA8C3B"},"name":"Above median","x":{"dtype":"i2","bdata":"0AfRB9IH0wfUB9UH1gfXB9gH2QfaB9sH3AfdB94H3wfgB+EH4gfjB+QH5QfmBw=="},"y":{"dtype":"f8","bdata":"TlViTPcQCsAXnULyingEwFYL6IuK8RHAH34wihA8EMB1ov4urrOhPwyZKYtU4O0\u002fxUOwRNgy97+PCv1sL14AQIHITfs+phpAXv3oIfmpIEAmgGyIII0oQOcxkPZQfSxA5FUKBhREKkBjFtKMiiYrQFSJnZwImS9ALNMybF4mMUB+uzDgHl8wQGo5i0KzRDBAUFX7NUJNMUA9t9UgeZI0QJmGnl\u002fSpStAlxTynDfMJcBOUAC60x0twA=="},"type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"legend":{"x":0.8,"y":1.1,"orientation":"h"},"barmode":"group","title":{"text":"Avg Real 2-Year-Ahead Growth: Above vs Below Median Cities"},"xaxis":{"title":{"text":"Year"}},"yaxis":{"title":{"text":"Avg growth over next 2 years"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f15ad686-f03f-48fb-9ea5-5ee9a1ae4b3d');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-avg-2yr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;14: Average real two year ahead price growth for cities above and below the median price, 2000–2024. Blue bars represent cities with below-median prices, orange bars represent those above. This plot highlights changing fortunes in the housing market after 2010, above median cities saw faster subsequent growth, but this pattern reverses after 2020.
</figcaption>
</figure>
</div>
</div>
<p>Each year in this <a href="#fig-avg-2yr" class="quarto-xref">Figure&nbsp;14</a> starts with a simple split: cities that are priced above the median at that time (orange) and cities below the median (blue). Then it asks one forward looking question: over the next two years, which group moves more in real terms?</p>
<p>In the early 2000s, there isn’t much to separate them. Both colours hover around zero and often slip below it, so the typical outcome over the next two years is flat or weak whether a city begins expensive or cheap. After 2010, the bars pull apart. For much of the 2010s, the orange bars sit higher than the blue bars, meaning the cities that were already above the median usually posted the stronger two year gains. Instead of cheaper cities catching up, the upper half often extended its lead.</p>
<p>The pattern shifts again around 2020. The two groups come back together and, in the latest years, both turn negative. Here the orange bars tend to drop further, suggesting that when conditions worsen, the more expensive cities often fall more, while the cheaper half sometimes holds up a bit better.</p>
<p>Read as a whole, the chart tells a clear arc: a quiet early period, a decade where the already expensive cities led the rise, and a recent phase where the downturn hits the top half harder.</p>
<div id="cell-fig-facets" class="cell" data-fig-height="15" data-fig-width="19" data-execution_count="16">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_city_facets(yearly_prices, segment, context_color, focus_color, title, ncols<span class="op">=</span><span class="dv">4</span>):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> yearly_prices[yearly_prices[<span class="st">"Property_Type"</span>].<span class="bu">str</span>.strip() <span class="op">==</span> segment].copy()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> (</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        df.groupby([<span class="st">"City"</span>, <span class="st">"Year"</span>], as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">"Price"</span>]</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        .mean()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        .sort_values([<span class="st">"City"</span>, <span class="st">"Year"</span>])</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        .reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    cities <span class="op">=</span> <span class="bu">sorted</span>(df[<span class="st">"City"</span>].unique())</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    x_major <span class="op">=</span> [<span class="dv">1960</span>, <span class="dv">1980</span>, <span class="dv">2000</span>, <span class="dv">2020</span>]</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    x_min, x_max <span class="op">=</span> <span class="dv">1960</span>, <span class="dv">2025</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    nrows <span class="op">=</span> <span class="bu">int</span>(np.ceil(<span class="bu">len</span>(cities) <span class="op">/</span> ncols))</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    fig, axes <span class="op">=</span> plt.subplots(</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        nrows, ncols,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>        figsize<span class="op">=</span>(<span class="dv">19</span>, <span class="dv">15</span>),</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        sharex<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        sharey<span class="op">=</span><span class="va">False</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    axes <span class="op">=</span> np.array(axes).reshape(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    context_lw <span class="op">=</span> <span class="fl">1.1</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    context_alpha <span class="op">=</span> <span class="fl">0.23</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    title_fs <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    title_fw <span class="op">=</span> <span class="st">"bold"</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    tick_fs <span class="op">=</span> <span class="dv">11</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    tick_fw <span class="op">=</span> <span class="st">"bold"</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    axis_label_fs <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    axis_label_fw <span class="op">=</span> <span class="st">"bold"</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    groups <span class="op">=</span> <span class="bu">list</span>(df.groupby(<span class="st">"City"</span>))</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, city <span class="kw">in</span> <span class="bu">enumerate</span>(cities):</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>        ax <span class="op">=</span> axes[i]</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> _, grp <span class="kw">in</span> groups:</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>            ax.plot(</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>                grp[<span class="st">"Year"</span>], grp[<span class="st">"Price"</span>],</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>                color<span class="op">=</span>context_color,</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>                lw<span class="op">=</span>context_lw,</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>                alpha<span class="op">=</span>context_alpha,</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>                zorder<span class="op">=</span><span class="dv">1</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>        sub <span class="op">=</span> df[df[<span class="st">"City"</span>] <span class="op">==</span> city]</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>        ax.plot(</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>            sub[<span class="st">"Year"</span>], sub[<span class="st">"Price"</span>],</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>focus_color,</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>            lw<span class="op">=</span><span class="fl">2.6</span>,</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">1.0</span>,</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>            zorder<span class="op">=</span><span class="dv">3</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>        ax.set_title(city, fontsize<span class="op">=</span>title_fs, fontweight<span class="op">=</span>title_fw, pad<span class="op">=</span><span class="dv">7</span>)</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>        ax.set_xlim(x_min, x_max)</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>        ax.set_xticks(x_major)</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>        ax.xaxis.set_minor_locator(MultipleLocator(<span class="dv">1</span>))</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>        ax.yaxis.set_major_locator(MaxNLocator(nbins<span class="op">=</span><span class="dv">3</span>))</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>        ax.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, which<span class="op">=</span><span class="st">"major"</span>, labelsize<span class="op">=</span>tick_fs, length<span class="op">=</span><span class="dv">8</span>, width<span class="op">=</span><span class="fl">1.2</span>, pad<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>        ax.tick_params(axis<span class="op">=</span><span class="st">"x"</span>, which<span class="op">=</span><span class="st">"minor"</span>, length<span class="op">=</span><span class="dv">4</span>, width<span class="op">=</span><span class="fl">1.0</span>)</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>        ax.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, which<span class="op">=</span><span class="st">"major"</span>, labelsize<span class="op">=</span>tick_fs, length<span class="op">=</span><span class="dv">7</span>, width<span class="op">=</span><span class="fl">1.1</span>)</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> lab <span class="kw">in</span> ax.get_xticklabels() <span class="op">+</span> ax.get_yticklabels():</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>            lab.set_fontweight(tick_fw)</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> side <span class="kw">in</span> [<span class="st">"top"</span>, <span class="st">"right"</span>, <span class="st">"bottom"</span>, <span class="st">"left"</span>]:</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>            ax.spines[side].set_visible(<span class="va">True</span>)</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>            ax.spines[side].set_linewidth(<span class="fl">1.2</span>)</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>            ax.spines[side].set_color(<span class="st">"black"</span>)</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>        ax.grid(<span class="va">False</span>)</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i <span class="op">+</span> <span class="dv">1</span>, <span class="bu">len</span>(axes)):</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>        axes[j].axis(<span class="st">"off"</span>)</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>    fig.suptitle(title, fontsize<span class="op">=</span><span class="dv">25</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>, y<span class="op">=</span><span class="fl">1.01</span>)</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>    fig.supxlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span>axis_label_fs, fontweight<span class="op">=</span>axis_label_fw, y<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>    fig.supylabel(<span class="st">"Average Price (€/m²)"</span>, fontsize<span class="op">=</span>axis_label_fs, fontweight<span class="op">=</span>axis_label_fw, x<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>plot_city_facets(</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>    yearly_prices,</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>    segment<span class="op">=</span><span class="st">"Apartment"</span>,</span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    context_color<span class="op">=</span><span class="st">"#a1d99b"</span>,</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    focus_color<span class="op">=</span><span class="st">"#238b45"</span>,</span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Apartment Price Trends by City (1965–2025)"</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-facets" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-facets-output-1.png" width="1808" height="1459" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15: City by city price trends for German residential properties 1965–2025. Each panel highlights a single city’s trajectory (bold) with all other cities shown as faint context lines. This visualization reveals both national patterns and apartment segment.
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-single-facets" class="cell" data-fig-height="15" data-fig-width="19" data-execution_count="17">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>plot_city_facets(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>yearly_prices,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    segment<span class="op">=</span><span class="st">"Single-family house"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    context_color<span class="op">=</span><span class="st">"#fdbb84"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    focus_color<span class="op">=</span><span class="st">"#e6550d"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Single-Family House Price Trends by City (1965–2025)"</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-single-facets" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-single-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-single-facets-output-1.png" width="1808" height="1459" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-single-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;16: Single family house price trends by city, 1965–2025. The bold line shows the focal city’s trajectory; other cities are shown in light orange for comparison.
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-multi-facets" class="cell" data-fig-height="15" data-fig-width="19" data-execution_count="18">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>plot_city_facets(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    yearly_prices,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    segment<span class="op">=</span><span class="st">"Multi-family house"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    context_color<span class="op">=</span><span class="st">"#f3a4ae"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    focus_color<span class="op">=</span><span class="st">"#c61a2b"</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Multi-Family House Price Trends by City (1965–2025)"</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-multi-facets" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-multi-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="dsv_files/figure-html/fig-multi-facets-output-1.png" width="1808" height="1459" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-multi-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;17: Multi family house price trends by city, 1965–2025. Distinct patterns emerge in cities like Dresden and Muenster, which exceed the national average in this segment.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="behind-the-curves" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="behind-the-curves"><span class="header-section-number">8</span> Behind the Curves</h2>
<ul>
<li><p>This project was shaped by a question that had long been asked but rarely answered with clarity. Through the GREIX dataset, a detailed view of housing prices across German cities was made possible, revealing both national rhythms and city-specific divergences.</p></li>
<li><p>Macroeconomic markers were studied not to build a model, but to understand when prices moved with the broader economy and when they broke away. Each figure was crafted to let patterns emerge rather than be imposed.</p></li>
<li><p>The analysis was extended beyond prices. To understand the forces behind the trends, macroeconomic indicators such as interest rates, unemployment, and GDP were incorporated. These were not used to fully explain housing prices, but rather to observe when economic conditions aligned with price movements and when they diverged.</p></li>
<li><p>What was found was not a single story, but many, unfolding differently across cities and decades. Some moved in step, others strayed. Some rose steadily, others surprised.</p></li>
<li><p>This work was not built to predict. It was built to observe. And in doing so, it invites deeper questions about the forces shaping where people live, and at what cost.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>